<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <!-- Meta tags para PWA e Mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#f5f3ff">
    
    <!-- Logo: Substitua o href por "icon.png" quando subir para seu site -->
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3076/3076134.png">
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/3076/3076134.png" type="image/png">
    
    <link rel="manifest" href="" />

    <title>Manual da Bestie: Secando sem Neura üíÖ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- 
      === CSS CUSTOMIZADO === 
      Design System "Lilac Glow"
    -->
    <style>
        /* Base */
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f5f3ff; /* Violet 50 base */
            color: #4c1d95; /* Violet 900 text */
            -webkit-tap-highlight-color: transparent; /* Remove highlight azul ao tocar em mobile */
        }

        /* Layout Dashboard */
        .dashboard-wrapper {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        @media (min-width: 1024px) {
            .dashboard-wrapper {
                flex-direction: row;
                height: 100vh;
                overflow: hidden;
            }
            
            .sidebar {
                width: 380px;
                flex-shrink: 0;
                height: 100%;
                overflow-y: auto;
                background: white;
                border-right: 1px solid #ddd6fe; /* Violet 200 */
                z-index: 30;
            }

            .main-content {
                flex-grow: 1;
                height: 100%;
                overflow-y: auto;
                background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%); /* Gradiente Lil√°s */
                position: relative; /* Necess√°rio para o sticky funcionar bem dentro */
            }
        }

        /* Cart√µes e Elementos */
        .card-soft {
            background: white;
            border-radius: 24px;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.08); /* Sombra Roxa Suave */
            border: 1px solid rgba(255, 255, 255, 0.8);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card-soft:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.12);
        }

        /* Gr√°ficos */
        .chart-box {
            position: relative;
            height: 220px;
            width: 100%;
        }

        /* Header Fixo (Sticky Header) - REFOR√áADO */
        .sticky-header {
            position: -webkit-sticky; /* Safari */
            position: sticky;
            top: 0;
            z-index: 50; /* Aumentado para garantir que fique acima de tudo */
            background: rgba(245, 243, 255, 0.95); /* Fundo mais s√≥lido */
            backdrop-filter: blur(12px);
            padding-top: 1rem;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(221, 214, 254, 0.8);
            /* Compensa√ß√£o visual para margens laterais em mobile se necess√°rio */
        }

        /* Navega√ß√£o (Abas P√≠lula) */
        .pill-nav {
            background: white;
            border-radius: 16px;
            padding: 5px;
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* Alterado para 5 colunas */
            gap: 6px;
            border: 1px solid #ddd6fe;
            box-shadow: 0 2px 10px rgba(139, 92, 246, 0.05);
        }

        .pill-btn {
            padding: 10px;
            border-radius: 12px;
            font-weight: 800;
            font-size: 0.85rem; /* Levemente reduzido para caber 5 */
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            cursor: pointer;
            color: #8b5cf6; /* Violet 500 */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .pill-btn.active {
            background: #8b5cf6; /* Violet 500 */
            color: white;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
            transform: scale(1.02);
        }

        .pill-btn:hover:not(.active) {
            background: #f3e8ff;
            color: #7c3aed;
        }

        /* Checkbox Habits */
        .habit-btn {
            transition: all 0.2s;
            border: 2px solid #e5e7eb;
        }
        .habit-btn.completed {
            background-color: #a78bfa; /* Violet 400 */
            border-color: #8b5cf6;
            color: white;
            transform: scale(1.05);
        }

        /* Anima√ß√£o do Sino */
        @keyframes ring {
            0% { transform: rotate(0); }
            10% { transform: rotate(30deg); }
            30% { transform: rotate(-28deg); }
            50% { transform: rotate(34deg); }
            70% { transform: rotate(-32deg); }
            90% { transform: rotate(30deg); }
            100% { transform: rotate(0); }
        }
        .bell-ring { animation: ring 4s .7s ease-in-out infinite; }

        /* Scrollbar Cute */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #c4b5fd; border-radius: 10px; }
        
        /* Anima√ß√µes */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-enter { animation: slideIn 0.4s ease-out forwards; }
        
        /* Loading Overlay e Login Screen */
        #loading-overlay, #login-screen {
            position: fixed;
            inset: 0;
            background: #f5f3ff;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 0.5s, visibility 0.5s;
        }
        .hidden-fade {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
    </style>
    <!-- Script para instalar Manifesto dinamicamente -->
    <script>
        let iconUrl = 'icon.png';
        try {
            // Tenta resolver URL absoluta para o manifesto.
            // Se falhar (ex: em alguns iframes ou blobs), usa o caminho relativo.
            iconUrl = new URL('icon.png', window.location.href).href;
        } catch (e) {
            console.log('Usando caminho relativo para o √≠cone do PWA.');
        }

        const manifest = {
            "name": "Manual da Bestie",
            "short_name": "Bestie App",
            "start_url": ".",
            "display": "standalone",
            "background_color": "#f5f3ff",
            "theme_color": "#f5f3ff",
            "icons": [{
                "src": iconUrl, 
                "sizes": "512x512",
                "type": "image/png"
            }]
        };
        const stringManifest = JSON.stringify(manifest);
        const blob = new Blob([stringManifest], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(blob);
        document.querySelector('link[rel="manifest"]').setAttribute('href', manifestURL);
    </script>
</head>
<body>

    <!-- Loading Overlay (Carregamento inicial) -->
    <div id="loading-overlay">
        <div class="text-center">
            <div class="text-4xl animate-bounce mb-2">üíÖ</div>
            <p class="text-violet-600 font-bold">Carregando...</p>
        </div>
    </div>

    <!-- Login Screen (Tela Inicial) -->
    <div id="login-screen" class="hidden-fade flex-col p-6 text-center">
        <div class="mb-8">
            <!-- Logo: use icon.png se tiver local -->
            <img src="icon.png" class="w-24 h-24 rounded-3xl shadow-xl mx-auto mb-4 border-4 border-white" alt="Logo">
            <h1 class="text-4xl font-extrabold text-violet-900 mb-2">Manual da Bestie</h1>
            <p class="text-violet-500 font-medium">Secando sem Neura üíÖ</p>
        </div>
        
        <div class="w-full max-w-xs space-y-4">
            <button onclick="loginWithGoogle()" class="w-full bg-white text-stone-600 font-bold py-3.5 px-4 rounded-2xl border border-stone-200 shadow-md hover:bg-stone-50 transition active:scale-95 flex items-center justify-center gap-3">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5">
                Entrar com Google
            </button>
            
            <div class="relative py-2">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-violet-200"></div>
                </div>
                <div class="relative flex justify-center text-xs">
                    <span class="px-2 bg-[#f5f3ff] text-violet-300">OU</span>
                </div>
            </div>

            <button onclick="skipLogin()" class="w-full text-violet-400 font-bold text-sm py-2 hover:text-violet-600 transition">
                Continuar sem conta (Offline)
            </button>
        </div>
        
        <p class="mt-8 text-[10px] text-violet-300 max-w-xs mx-auto">
            Ao entrar, seus dados ser√£o sincronizados na nuvem para voc√™ acessar de qualquer lugar.
        </p>
    </div>

    <div class="dashboard-wrapper">
        
        <!-- SIDEBAR: Identidade & Metas -->
        <aside class="sidebar p-8 flex flex-col gap-8 relative">
            <!-- Branding -->
            <div class="text-center lg:text-left">
                <div class="inline-flex items-center gap-2 px-3 py-1 bg-violet-100 text-violet-600 rounded-full text-xs font-bold mb-3 tracking-wide uppercase">
                    <span id="sync-status">‚òÅÔ∏è</span> Manual da Bestie
                </div>
                <h1 class="text-4xl font-extrabold text-violet-900 leading-tight tracking-tight">
                    Secando sem <br><span class="text-transparent bg-clip-text bg-gradient-to-r from-violet-600 to-fuchsia-500">Neura</span> üíÖ
                </h1>
                <p class="text-violet-400 mt-3 font-medium leading-relaxed mb-4">
                    Ficar fina comendo arroz, feij√£o e batata, gastando pouco.
                </p>
                
                <!-- √Årea de Login na Sidebar (Para logout ou info) -->
                <div id="auth-section">
                    <!-- Conte√∫do injetado via JS -->
                </div>
            </div>

            <!-- Card: Hidrata√ß√£o (Destaque) -->
            <div class="card-soft p-6 bg-gradient-to-br from-white to-sky-50 border-sky-100">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <div class="flex items-center gap-2 mb-1">
                            <h2 class="font-bold text-sky-600 text-sm uppercase tracking-wider">Hidrata√ß√£o Di√°ria</h2>
                            <!-- Bot√£o de Lembrete: S√≥ o Sino -->
                            <button onclick="toggleReminder()" id="btn-reminder" class="flex items-center justify-center text-lg font-bold bg-sky-100 text-sky-600 w-10 h-10 rounded-full hover:bg-sky-200 transition border border-sky-200 cursor-pointer shadow-sm active:scale-95" aria-label="Ativar Lembrete">
                                üîî
                            </button>
                        </div>
                        <span id="water-display" class="text-3xl font-black text-sky-500">0.0L</span>
                    </div>
                    <div class="bg-sky-100 p-2 rounded-full text-sky-500 text-xl">
                        üíß
                    </div>
                </div>
                
                <div class="chart-box">
                    <canvas id="hydrationChart"></canvas>
                </div>

                <div class="flex gap-3 mt-6">
                    <button onclick="addWater()" class="flex-1 bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg shadow-sky-200 transition active:scale-95 flex items-center justify-center gap-2">
                        <span>+</span> 250ml
                    </button>
                    <button onclick="resetWater()" class="px-4 py-3 rounded-xl border-2 border-sky-100 text-sky-400 font-bold hover:bg-sky-50 transition">
                        ‚Ü∫
                    </button>
                </div>
            </div>

            <!-- Card: L√≥gica do Prato -->
            <div class="card-soft p-6 border-violet-100">
                <h2 class="font-bold text-violet-800 text-sm uppercase tracking-wider mb-4 text-center">A L√≥gica do Prato</h2>
                <div class="chart-box" style="height: 180px;">
                    <canvas id="plateChart"></canvas>
                </div>
                <!-- Legenda Customizada -->
                <div class="flex justify-center gap-3 mt-4">
                    <div class="flex items-center gap-1.5 bg-green-50 px-2 py-1 rounded-lg border border-green-100">
                        <div class="w-2.5 h-2.5 rounded-full bg-green-500"></div>
                        <span class="text-xs font-bold text-green-700">Salada</span>
                    </div>
                    <div class="flex items-center gap-1.5 bg-rose-50 px-2 py-1 rounded-lg border border-rose-100">
                        <div class="w-2.5 h-2.5 rounded-full bg-rose-500"></div>
                        <span class="text-xs font-bold text-rose-700">Prote√≠na</span>
                    </div>
                    <div class="flex items-center gap-1.5 bg-yellow-50 px-2 py-1 rounded-lg border border-yellow-100">
                        <div class="w-2.5 h-2.5 rounded-full bg-yellow-500"></div>
                        <span class="text-xs font-bold text-yellow-700">Carbo</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT: O Guia Pr√°tico -->
        <main class="main-content px-4 lg:px-10 pb-6">
            <div class="max-w-5xl mx-auto"> 
                
                <!-- SE√á√ÉO 1: Header + Card√°pio (FIXO NO TOPO) -->
                <section class="sticky-header">
                    <div class="flex flex-col md:flex-row md:items-end justify-between mb-4 gap-2">
                        <div>
                            <h2 class="text-2xl font-bold text-violet-900">üòã O Que Tem Pra Hoje?</h2>
                            <p class="text-violet-500 text-sm">Clica e escolhe, amada!</p>
                        </div>
                    </div>

                    <!-- Navega√ß√£o P√≠lula -->
                    <div class="pill-nav">
                        <button onclick="switchTab('cafe')" id="tab-cafe" class="pill-btn active">
                            <span>‚òï</span> <span class="hidden md:inline">Caf√©</span>
                        </button>
                        <button onclick="switchTab('almoco')" id="tab-almoco" class="pill-btn">
                            <span>ü•ó</span> <span class="hidden md:inline">Almo√ßo</span>
                        </button>
                        <button onclick="switchTab('lanche')" id="tab-lanche" class="pill-btn">
                            <span>üçì</span> <span class="hidden md:inline">Lanche</span>
                        </button>
                        <button onclick="switchTab('jantar')" id="tab-jantar" class="pill-btn">
                            <span>üåô</span> <span class="hidden md:inline">Jantar</span>
                        </button>
                        <!-- Nova Aba: Check-in -->
                        <button onclick="switchTab('checkin')" id="tab-checkin" class="pill-btn">
                            <span>‚úÖ</span> <span class="hidden md:inline">Check-in</span>
                        </button>
                    </div>
                </section>

                <!-- Conte√∫do Din√¢mico (Rol√°vel) -->
                <div class="card-soft p-6 md:p-10 min-h-[320px] relative overflow-hidden mt-2 mb-8">
                    <!-- Decorative bg blob -->
                    <div class="absolute top-0 right-0 w-64 h-64 bg-violet-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 -translate-y-1/2 translate-x-1/2"></div>

                    <!-- Caf√© -->
                    <div id="content-cafe" class="space-y-4 animate-enter relative z-10">
                        <div class="flex gap-4 p-5 rounded-2xl bg-white border border-violet-100 shadow-sm hover:border-violet-300 transition group">
                            <div class="text-3xl bg-violet-50 w-14 h-14 rounded-full flex items-center justify-center group-hover:scale-110 transition">‚ù§Ô∏è</div>
                            <div>
                                <h3 class="font-bold text-violet-600 text-lg">Op√ß√£o 1 (A Favorita)</h3>
                                <p class="text-violet-800 mt-1">
                                    <strong>50g</strong> P√£o Franc√™s sem miolo (1 un) + 
                                    <br><strong>100g</strong> Ovos mexidos (2 un).
                                </p>
                                <p class="text-xs font-bold text-violet-400 mt-2 uppercase tracking-wide">Bebida</p>
                                <p class="text-sm text-violet-600">Caf√© preto ou Leite desnatado + 1 colherzinha de Achocolatado Light.</p>
                            </div>
                        </div>
                        <div class="flex gap-4 p-5 rounded-2xl bg-white border border-violet-100 shadow-sm hover:border-yellow-300 transition group">
                            <div class="text-3xl bg-yellow-50 w-14 h-14 rounded-full flex items-center justify-center group-hover:scale-110 transition">üåΩ</div>
                            <div>
                                <h3 class="font-bold text-violet-800 text-lg">Op√ß√£o 2 (Sustan√ßa)</h3>
                                <p class="text-violet-600 mt-1">
                                    <strong>100g</strong> Cuscuz pronto (4 col. sopa) com 
                                    <br><strong>30g</strong> Queijo Mussarela (1 fatia) ou 1 Ovo.
                                </p>
                            </div>
                        </div>
                        <div class="flex gap-4 p-5 rounded-2xl bg-white border border-violet-100 shadow-sm hover:border-purple-300 transition group">
                            <div class="text-3xl bg-purple-50 w-14 h-14 rounded-full flex items-center justify-center group-hover:scale-110 transition">‚ú®</div>
                            <div>
                                <h3 class="font-bold text-violet-800 text-lg">Op√ß√£o 3 (Chique)</h3>
                                <p class="text-violet-600 mt-1">
                                    <strong>60g</strong> Tapioca (3 col. sopa) com 
                                    <br><strong>80g</strong> Frango (4 col. sopa) + <strong>30g</strong> Requeij√£o (1 col. sopa).
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Almo√ßo -->
                    <div id="content-almoco" class="hidden space-y-6 animate-enter relative z-10">
                        <div class="bg-green-50 p-6 rounded-2xl border border-green-200 text-center shadow-inner">
                            <h3 class="font-bold text-green-800 text-xl mb-2 flex items-center justify-center gap-2">
                                <span>ü•ó</span> A Regra de Ouro
                            </h3>
                            <p class="text-green-900 font-medium">Metade do prato (aprox. <strong>200g</strong>) √© <strong>SALADA</strong> (Repolho, Alface) + <strong>LEGUMES</strong> (Ab√≥bora, Cenoura).</p>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="p-6 rounded-2xl bg-white border border-violet-100 shadow-sm">
                                <span class="inline-block px-2 py-1 bg-violet-100 text-violet-600 rounded text-xs font-bold uppercase mb-2">Prote√≠na</span>
                                <p class="font-bold text-violet-800 text-xl">
                                    100g <span class="text-base font-normal text-violet-600">(1 fil√© m√©dio ou 4 col. carne mo√≠da)</span>
                                    <br><span class="text-sm font-normal text-violet-400">ou 2 Ovos</span>
                                </p>
                            </div>
                            <div class="p-6 rounded-2xl bg-white border border-violet-100 shadow-sm">
                                <span class="inline-block px-2 py-1 bg-yellow-100 text-yellow-600 rounded text-xs font-bold uppercase mb-2">Carbo (Energia)</span>
                                <p class="font-bold text-violet-800 text-xl">
                                    90g Arroz <span class="text-sm font-normal">(3 col. sopa)</span> + 
                                    <br>140g Feij√£o <span class="text-sm font-normal">(1 concha)</span>
                                </p>
                                <p class="text-xs text-violet-500 mt-2 italic border-t border-violet-100 pt-2">
                                    Troca: <strong>150g</strong> Batata/Mandioca (2 peda√ßos m√©dios)
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Lanche -->
                    <div id="content-lanche" class="hidden animate-enter relative z-10">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white p-6 rounded-2xl border border-violet-100 text-center hover:shadow-lg hover:-translate-y-1 transition duration-300">
                                <div class="text-5xl mb-4 bg-violet-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto">üçì</div>
                                <h3 class="font-bold text-violet-600 text-lg">Fresquinho</h3>
                                <p class="text-sm text-violet-600 mt-2 font-medium">
                                    <strong>170g</strong> Iogurte (1 pote) + <br><strong>150g</strong> Morango (1 x√≠cara).
                                </p>
                            </div>
                            <div class="bg-white p-6 rounded-2xl border border-violet-100 text-center hover:shadow-lg hover:-translate-y-1 transition duration-300">
                                <div class="text-5xl mb-4 bg-orange-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto">üçû</div>
                                <h3 class="font-bold text-violet-700 text-lg">Cl√°ssico</h3>
                                <p class="text-sm text-violet-600 mt-2 font-medium">
                                    <strong>50g</strong> P√£o (2 fatias) + <br><strong>30g</strong> Requeij√£o (1 col. sopa).
                                </p>
                            </div>
                            <div class="bg-white p-6 rounded-2xl border border-violet-100 text-center hover:shadow-lg hover:-translate-y-1 transition duration-300">
                                <div class="text-5xl mb-4 bg-yellow-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto">üçø</div>
                                <h3 class="font-bold text-yellow-600 text-lg">Pipoca da Tarde</h3>
                                <p class="text-sm text-violet-600 mt-2 font-medium">
                                    <strong>30g</strong> Milho (2 col. sopa) estourado. Pouco sal!
                                </p>
                            </div>
                        </div>
                        <div class="mt-8 text-center">
                            <span class="inline-flex items-center gap-2 bg-violet-100 text-violet-600 px-5 py-2 rounded-full text-sm font-bold shadow-inner">
                                <span>üí°</span> Fome pequena? V√° de Melancia ou Gelatina Zero.
                            </span>
                        </div>
                    </div>

                    <!-- Jantar -->
                    <div id="content-jantar" class="hidden space-y-4 animate-enter relative z-10">
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="p-6 rounded-2xl bg-white border border-green-100 shadow-sm relative overflow-hidden group">
                                <div class="absolute top-0 left-0 w-2 h-full bg-green-400"></div>
                                <h3 class="font-bold text-violet-700 text-lg group-hover:text-green-600 transition">üí∏ Economia</h3>
                                <p class="text-violet-500 text-sm mt-1">Repete o almo√ßo! Mesmas quantidades.</p>
                            </div>
                            <div class="p-6 rounded-2xl bg-white border border-yellow-100 shadow-sm relative overflow-hidden group">
                                <div class="absolute top-0 left-0 w-2 h-full bg-yellow-400"></div>
                                <h3 class="font-bold text-violet-700 text-lg group-hover:text-yellow-600 transition">üç≥ Omeleteira</h3>
                                <p class="text-violet-500 text-sm mt-1">2 ovos + recheio √† vontade (tomate/cebola).</p>
                            </div>
                            <div class="p-6 rounded-2xl bg-white border border-rose-100 shadow-sm relative overflow-hidden group">
                                <div class="absolute top-0 left-0 w-2 h-full bg-rose-400"></div>
                                <h3 class="font-bold text-violet-700 text-lg group-hover:text-rose-500 transition">üç≤ Sopinha</h3>
                                <p class="text-violet-500 text-sm mt-1">Legumes + <strong>100g</strong> frango desfiado.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Novo Conte√∫do: Check-in (Rastreador) -->
                    <div id="content-checkin" class="hidden space-y-6 animate-enter relative z-10">
                        <div class="text-center mb-6">
                            <h3 class="font-bold text-violet-800 text-2xl">Rastreador da Semana</h3>
                            <p class="text-violet-500 text-sm">Marca a√≠, bestie! A const√¢ncia √© o segredo. ‚ú®</p>
                        </div>

                        <!-- Barra de Progresso -->
                        <div class="bg-white p-4 rounded-2xl shadow-sm border border-violet-100 mb-6">
                            <div class="flex justify-between text-xs font-bold text-violet-400 mb-1 uppercase tracking-wide">
                                <span>Foco na Semana</span>
                                <span id="progress-text">0%</span>
                            </div>
                            <div class="w-full bg-violet-100 rounded-full h-3">
                                <div id="progress-bar" class="bg-gradient-to-r from-violet-500 to-fuchsia-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                        </div>

                        <!-- Lista de Dias -->
                        <div class="grid gap-3" id="tracker-list">
                            <!-- JS vai preencher aqui -->
                        </div>
                        
                        <div class="text-center mt-4">
                            <button onclick="clearTracker()" class="text-xs text-stone-400 underline hover:text-red-400 transition">Limpar hist√≥rico</button>
                        </div>
                    </div>
                </div>

                <!-- SE√á√ÉO 2: Trocas e Dicas (Layout Assim√©trico) -->
                <section class="grid grid-cols-1 md:grid-cols-12 gap-6 pb-6 items-start"> 
                    
                    <!-- Coluna Esquerda: Trocas (Maior) -->
                    <div class="md:col-span-7 card-soft p-6 bg-white h-fit">
                        <h3 class="font-bold text-violet-800 text-xl mb-6 flex items-center gap-2">
                            <span class="bg-violet-100 p-1.5 rounded-lg text-violet-600 text-base">üîÑ</span> Trocas da Bestie
                        </h3>
                        <div class="space-y-4">
                            <!-- Item 1: Prote√≠na -->
                            <div class="flex items-center justify-between p-4 bg-violet-50/50 rounded-2xl border border-violet-100">
                                <span class="font-extrabold text-violet-800">Prote√≠na</span>
                                <div class="text-right text-sm">
                                    <div class="text-green-600 font-bold mb-1">‚úÖ Ovos, Frango, Atum, Lombo, Carne Mo√≠da</div>
                                    <div class="text-red-400 font-medium text-xs">‚ùå Salsicha, Lingui√ßa</div>
                                </div>
                            </div>
                            <!-- Item 2: Carbo -->
                            <div class="flex items-center justify-between p-4 bg-violet-50/50 rounded-2xl border border-violet-100">
                                <span class="font-extrabold text-violet-800">Carbo</span>
                                <div class="text-right text-sm">
                                    <div class="text-green-600 font-bold mb-1">‚úÖ Batata Inglesa, Arroz, Mandioca</div>
                                    <div class="text-red-400 font-medium text-xs">‚ùå Integrais, Biscoito Recheado</div>
                                </div>
                            </div>
                            <!-- Item 3: Vegetais -->
                            <div class="flex items-center justify-between p-4 bg-violet-50/50 rounded-2xl border border-violet-100">
                                <span class="font-extrabold text-violet-800">Vegetais</span>
                                <div class="text-right text-sm">
                                    <div class="text-green-600 font-bold mb-1">‚úÖ Repolho, Alface, Ab√≥bora, Cenoura</div>
                                    <div class="text-red-400 font-medium text-xs">‚ùå Chuchu, Ervilha, Milho</div>
                                </div>
                            </div>
                            <!-- Item 4: Frutas -->
                            <div class="flex items-center justify-between p-4 bg-violet-50/50 rounded-2xl border border-violet-100">
                                <span class="font-extrabold text-violet-800">Frutas</span>
                                <div class="text-right text-sm">
                                    <div class="text-green-600 font-bold mb-1">‚úÖ Melancia, Morango, Banana</div>
                                    <div class="text-red-400 font-medium text-xs">‚ùå Abacaxi, Frutas em Calda</div>
                                </div>
                            </div>
                            <!-- Item 5: Extras -->
                            <div class="flex items-center justify-between p-4 bg-violet-50/50 rounded-2xl border border-violet-100">
                                <span class="font-extrabold text-violet-800">Extras</span>
                                <div class="text-right text-sm">
                                    <div class="text-green-600 font-bold mb-1">‚úÖ Gelatina Zero, Ado√ßante, Cacau</div>
                                    <div class="text-red-400 font-medium text-xs">‚ùå A√ß√∫car Puro, Achocolatado Normal</div>
                                </div>
                            </div>
                            <!-- Item 6: Bebidas (NOVO) -->
                            <div class="flex items-center justify-between p-4 bg-violet-50/50 rounded-2xl border border-violet-100">
                                <span class="font-extrabold text-violet-800">Bebidas</span>
                                <div class="text-right text-sm">
                                    <div class="text-green-600 font-bold mb-1">‚úÖ √Ågua, Caf√©, Ch√° Mate Lim√£o Zero</div>
                                    <div class="text-red-400 font-medium text-xs">‚ùå Sucos de Caixinha, √Ålcool, A√ßucaradas</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Coluna Direita: Dicas e Fim de Semana (Menor) -->
                    <div class="md:col-span-5 flex flex-col gap-6">
                        <!-- Fim de Semana -->
                        <div class="card-soft p-6 bg-rose-50 border-rose-100 flex-grow relative overflow-hidden">
                            <div class="absolute -right-4 -top-4 w-24 h-24 bg-rose-200 rounded-full opacity-50 blur-xl"></div>
                            <h3 class="font-bold text-rose-700 mb-3 text-lg">üéâ Fim de Semana</h3>
                            <p class="text-rose-900 text-sm leading-relaxed">
                                Ningu√©m √© de ferro! Aproveite suas <strong>2 Refei√ß√µes Livres por fim de semana</strong> (elas se renovam desde que voc√™ siga a dieta corretamente na semana!) pra comer o que ama.
                            </p>
                            <div class="mt-4 text-xs font-bold text-rose-600 bg-white/60 p-2 rounded-lg inline-block">
                                ‚ö†Ô∏è O segredo: N√£o chute o balde o fim de semana todo. Fez a refei√ß√£o livre? Na pr√≥xima, volta pro plano!
                            </div>
                        </div>
                        
                        <!-- Dica de Ouro -->
                        <div class="card-soft p-6 bg-yellow-50 border-yellow-100">
                            <h3 class="font-bold text-yellow-700 mb-2 flex items-center gap-2">
                                <span>üí∏</span> Dica de Ouro
                            </h3>
                            <p class="text-yellow-900 text-sm">
                                V√° na <strong>Xepa da Feira</strong>. Morango t√° caro? Compra Banana. O importante √© n√£o parar.
                            </p>
                        </div>

                         <!-- SOS TPM & RUA -->
                        <div class="card-soft p-6 bg-purple-50 border-purple-100">
                            <h3 class="font-bold text-purple-700 mb-2 flex items-center gap-2">
                                <span>üç´</span> SOS Formiga
                            </h3>
                            
                            <!-- Em Casa -->
                            <p class="text-purple-900 text-xs font-bold uppercase tracking-wider mb-1 mt-2">üè† Em Casa (Baratinho)</p>
                            <ul class="text-sm text-purple-800 space-y-1 list-disc list-inside mb-4">
                                <li><strong>Banana "Caramelada":</strong> Micro-ondas + canela.</li>
                                <li><strong>Gelatina Zero:</strong> Faz pot√£o, caloria quase zero.</li>
                                <li><strong>Mingauzinho:</strong> Leite + aveia + achocolatado light.</li>
                            </ul>

                            <!-- Na Rua -->
                            <p class="text-purple-900 text-xs font-bold uppercase tracking-wider mb-1 border-t border-purple-200 pt-2">üö® Deu Surto na Rua</p>
                            <ul class="text-sm text-purple-800 space-y-1 list-disc list-inside">
                                <li><strong>1 Pa√ßoca:</strong> Vende no caixa, mata a vontade e √© barato.</li>
                                <li><strong>1 Bombom Unit√°rio:</strong> Compra UM (Ouro Branco/Sonho de Valsa) e sai correndo da loja!</li>
                                <li><strong>Coca Zero / Guaran√° Zero:</strong> O doce do ado√ßante ajuda muito a acalmar.</li>
                                <li><strong>Bananinha sem a√ß√∫car:</strong> Aquelas de mercado/farm√°cia.</li>
                            </ul>
                        </div>

                        <!-- Suplementos -->
                        <div class="card-soft p-6 bg-teal-50 border-teal-100">
                            <h3 class="font-bold text-teal-700 mb-2 flex items-center gap-2">
                                <span>üíä</span> Kit da Bestie (Quando der $$)
                            </h3>
                            <p class="text-teal-900 text-sm mb-3">
                                Comida de verdade vem primeiro! Mas se sobrar uma grana, investe nesses aqui (nessa ordem):
                            </p>
                            <ul class="text-sm text-teal-800 space-y-3">
                                <li class="flex items-start gap-2">
                                    <span class="text-lg mt-0.5">üåæ</span>
                                    <div>
                                        <strong>Fiber (Growth/Similar):</strong> 
                                        <p class="text-xs mt-0.5 opacity-90">Psyllium em p√≥. Salva o intestino e enche a barriga. Mistura no suco ou √°gua!</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-lg mt-0.5">ü•§</span>
                                    <div>
                                        <strong>Whey Protein:</strong> 
                                        <p class="text-xs mt-0.5 opacity-90">Lanche r√°pido e mata a vontade de doce (faz creminho com pouca √°gua ou mistura no iogurte).</p>
                                    </div>
                                </li>
                                <li class="flex items-start gap-2">
                                    <span class="text-lg mt-0.5">üí™</span>
                                    <div>
                                        <strong>Creatina:</strong> 
                                        <p class="text-xs mt-0.5 opacity-90">Oclaro! D√° for√ßa no treino e protege seus m√∫sculos. 3g a 5g todo dia.</p>
                                    </div>
                                </li>
                            </ul>
                             <div class="mt-4 text-xs font-bold text-teal-600 bg-white/60 p-2 rounded-lg inline-block">
                                ‚ö†Ô∏è Dica: Compra direto nos sites das f√°bricas (tipo Growth) que sai bem mais barato que na farm√°cia!
                            </div>
                        </div>
                    </div>

                </section>
            </div>
        </main>
    </div>

    <!-- Scripts do Firebase e App -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getAuth, signInWithCustomToken, signInAnonymously, onAuthStateChanged, GoogleAuthProvider, signInWithPopup, signOut } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';
        import { getFirestore, doc, setDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';

        // Configura√ß√£o do Firebase
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "AIzaSyDO1yt104pggWrI6G6zY89bgBPHaaFJa2M",
            authDomain: "manual-da-bestie.firebaseapp.com",
            projectId: "manual-da-bestie",
            storageBucket: "manual-da-bestie.firebasestorage.app",
            messagingSenderId: "421582504940",
            appId: "1:421582504940:web:6a236e1ad1f001daf236c9"
        };

        // ID do App para o caminho do banco de dados
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'manual-da-bestie';
        
        let db, auth, user;
        
        // Estado Global
        const state = {
            waterIntake: 0,
            waterGoal: 3500, // 3.5L
            activeTab: 'cafe',
            reminderActive: false,
            // H√°bito inicial
            habits: {
                Segunda: { treino: false, dieta: false },
                Terca: { treino: false, dieta: false },
                Quarta: { treino: false, dieta: false },
                Quinta: { treino: false, dieta: false },
                Sexta: { treino: false, dieta: false },
                Sabado: { treino: false, dieta: false },
                Domingo: { treino: false, dieta: false }
            }
        };

        const daysOfWeek = ['Segunda', 'Terca', 'Quarta', 'Quinta', 'Sexta', 'Sabado', 'Domingo'];
        const daysDisplay = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado', 'Domingo'];
        let reminderInterval;

        // Inicializa√ß√£o
        async function initApp() {
            try {
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);

                // Configura bot√£o de login/logout
                setupAuthUI();

                // L√≥gica de Autentica√ß√£o:
                // 1. Se estiver no Preview (tem token), loga autom√°tico para mostrar o app funcionando.
                // 2. Se estiver Exportado (uso real), aguarda o usu√°rio clicar em "Entrar com Google".
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } 
                // NOTA: Removi o signInAnonymously autom√°tico do 'else' para for√ßar o uso do Google no ambiente real.

                onAuthStateChanged(auth, (currentUser) => {
                    user = currentUser;
                    if (user) {
                        // LOGADO
                        document.getElementById('loading-overlay').classList.add('hidden');
                        document.getElementById('login-screen').classList.add('hidden-fade'); // Esconde login
                        
                        document.getElementById('sync-status').innerText = "‚òÅÔ∏è Conectado"; 
                        document.getElementById('auth-section').innerHTML = `
                            <div class="flex items-center gap-2 bg-violet-50 p-2 rounded-lg border border-violet-100">
                                <img src="${user.photoURL || 'https://cdn-icons-png.flaticon.com/512/847/847969.png'}" class="w-8 h-8 rounded-full">
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs text-violet-800 font-bold truncate">Ol√°, ${user.displayName?.split(' ')[0] || 'Bestie'}!</p>
                                    <button onclick="logout()" class="text-[10px] text-red-400 hover:underline">Sair</button>
                                </div>
                            </div>
                        `;
                        setupRealtimeListener();
                    } else {
                        // N√ÉO LOGADO
                        document.getElementById('loading-overlay').classList.add('hidden');
                        
                        // Mostra tela de login apenas se n√£o tiver optado por offline
                        if (!sessionStorage.getItem('offlineMode')) {
                            document.getElementById('login-screen').classList.remove('hidden-fade');
                        }

                        document.getElementById('sync-status').innerText = "üì± Offline";
                        setupAuthUI(); // Mostra bot√£o de login na sidebar tamb√©m
                        
                        // Carrega dados locais enquanto n√£o loga
                        loadLocalData();
                    }
                });

            } catch (e) {
                console.warn("Erro ao conectar Firebase:", e);
                document.getElementById('loading-overlay').classList.add('hidden');
                document.getElementById('login-screen').classList.add('hidden-fade'); // Erro? Libera o app offline
                loadLocalData();
            }
            
            initReminder();
            renderTracker();
            updateHydrationDisplay(false);
        }

        function setupAuthUI() {
            const authSection = document.getElementById('auth-section');
            if(authSection) {
                authSection.innerHTML = `
                    <button onclick="loginWithGoogle()" class="w-full bg-white text-stone-600 font-bold py-2 px-4 rounded-xl border border-stone-200 shadow-sm hover:bg-stone-50 transition flex items-center justify-center gap-2 text-sm">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-4 h-4">
                        Entrar com Google
                    </button>
                `;
            }
        }

        // Fun√ß√µes de Autentica√ß√£o Globais
        window.loginWithGoogle = async function() {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                console.error("Erro no login Google:", error);
                let msg = "Erro ao conectar. ";
                if (error.code === 'auth/popup-blocked') msg += "O navegador bloqueou o popup. Permita popups para este site.";
                else if (error.code === 'auth/unauthorized-domain') msg += "Dom√≠nio n√£o autorizado no Firebase Console. Adicione este dom√≠nio l√°!";
                else msg += error.message;
                alert(msg);
            }
        }

        window.skipLogin = function() {
            sessionStorage.setItem('offlineMode', 'true');
            document.getElementById('login-screen').classList.add('hidden-fade');
        }

        window.logout = async function() {
            try {
                await signOut(auth);
                sessionStorage.removeItem('offlineMode');
                window.location.reload(); 
            } catch (error) {
                console.error("Erro ao sair:", error);
            }
        }

        function loadLocalData() {
            const saved = localStorage.getItem('bestieState');
            if (saved) {
                const parsed = JSON.parse(saved);
                state.waterIntake = parsed.waterIntake || 0;
                state.habits = parsed.habits || state.habits;
                updateHydrationDisplay(false);
                renderTracker();
            }
        }

        // Listener de Dados em Tempo Real (O Caminho M√°gico!)
        function setupRealtimeListener() {
            if (!user || !db) return;
            
            const docRef = doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'daily_progress');
            
            onSnapshot(docRef, (docSnap) => {
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    if (data.waterIntake !== undefined) state.waterIntake = data.waterIntake;
                    if (data.habits !== undefined) state.habits = data.habits;
                    
                    updateHydrationDisplay(false); 
                    renderTracker();
                }
            }, (error) => {
                console.error("Erro ao sincronizar dados:", error);
                if (error.code === 'permission-denied') {
                    alert("Erro de permiss√£o! Verifique as regras do Firestore no console.");
                }
            });
        }

        // Salvar Dados
        async function saveData() {
            if (user && db) {
                const docRef = doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'daily_progress');
                try {
                    await setDoc(docRef, {
                        waterIntake: state.waterIntake,
                        habits: state.habits,
                        lastUpdated: new Date().toISOString()
                    }, { merge: true });
                } catch (e) {
                    console.error("Erro ao salvar na nuvem:", e);
                    if (e.code === 'permission-denied') {
                        alert("N√£o foi poss√≠vel salvar! Verifique as regras do Firestore.");
                    }
                }
            }
            
            // Sempre salva local como backup
            localStorage.setItem('bestieState', JSON.stringify({
                waterIntake: state.waterIntake,
                habits: state.habits
            }));
        }

        // Fun√ß√µes Globais (acess√≠veis pelo HTML)
        window.addWater = function() {
            if(state.waterIntake < state.waterGoal) {
                state.waterIntake += 250;
                updateHydrationDisplay(true);
            }
        };

        window.resetWater = function() {
            state.waterIntake = 0;
            updateHydrationDisplay(true);
        };

        window.toggleHabit = function(day, type) {
            state.habits[day][type] = !state.habits[day][type];
            renderTracker(); // Atualiza visual imediato
            saveData(); // Salva na nuvem
        };

        window.clearTracker = function() {
            if(confirm('Tem certeza que quer limpar a semana, amiga?')) {
                Object.keys(state.habits).forEach(day => {
                    state.habits[day] = { treino: false, dieta: false };
                });
                renderTracker();
                saveData();
            }
        };

        window.toggleReminder = function() {
            if (!("Notification" in window)) {
                alert("Seu navegador n√£o suporta notifica√ß√µes, amiga! üò¢");
                return;
            }

            if (state.reminderActive) {
                stopReminder();
            } else {
                if (Notification.permission === "granted") {
                    startReminder(true);
                } else if (Notification.permission !== "denied") {
                    Notification.requestPermission().then(permission => {
                        if (permission === "granted") {
                            startReminder(true);
                        }
                    });
                } else {
                    alert("Voc√™ bloqueou as notifica√ß√µes. Ative nas configura√ß√µes do navegador para usar!");
                }
            }
        };

        window.switchTab = function(selectedTab) {
            state.activeTab = selectedTab;
            const tabIds = ['cafe', 'almoco', 'lanche', 'jantar', 'checkin'];
            
            tabIds.forEach(id => {
                const btn = document.getElementById(`tab-${id}`);
                const content = document.getElementById(`content-${id}`);
                
                if (id === selectedTab) {
                    btn.classList.add('active');
                    content.classList.remove('hidden');
                } else {
                    btn.classList.remove('active');
                    content.classList.add('hidden');
                }
            });
        }

        // Fun√ß√µes Auxiliares
        function updateHydrationDisplay(shouldSave = true) {
            const remaining = Math.max(0, state.waterGoal - state.waterIntake);
            
            // Atualiza gr√°fico (se existir inst√¢ncia)
            if (hydrationChart) {
                hydrationChart.data.datasets[0].data = [state.waterIntake, remaining];
                if (remaining === 0) {
                    hydrationChart.data.datasets[0].backgroundColor[0] = '#10b981'; 
                } else {
                    hydrationChart.data.datasets[0].backgroundColor[0] = '#0ea5e9'; 
                }
                hydrationChart.update();
            }
            
            const liters = (state.waterIntake / 1000).toFixed(1) + "L";
            const display = document.getElementById('water-display');
            if(display) display.innerText = liters;

            if (shouldSave) saveData();
        }

        function renderTracker() {
            const container = document.getElementById('tracker-list');
            if(!container) return;
            container.innerHTML = ''; 

            daysOfWeek.forEach((day, index) => {
                const dayData = state.habits[day];
                
                const div = document.createElement('div');
                div.className = 'flex items-center justify-between bg-white p-3 rounded-xl border border-stone-100 shadow-sm';
                
                div.innerHTML = `
                    <span class="font-bold text-violet-800 w-20 text-sm">${daysDisplay[index]}</span>
                    <div class="flex gap-2">
                        <button onclick="toggleHabit('${day}', 'treino')" class="habit-btn ${dayData.treino ? 'completed' : 'bg-stone-50 text-stone-300'} px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1">
                            ${dayData.treino ? 'üí™ Feito' : 'üèãÔ∏è‚Äç‚ôÄÔ∏è Treino'}
                        </button>
                        <button onclick="toggleHabit('${day}', 'dieta')" class="habit-btn ${dayData.dieta ? 'completed' : 'bg-stone-50 text-stone-300'} px-3 py-1.5 rounded-lg text-xs font-bold flex items-center gap-1">
                            ${dayData.dieta ? 'ü•ó Feito' : 'ü•ó Dieta'}
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
            updateProgress();
        }

        function updateProgress() {
            let completed = 0;
            let total = 14; 
            
            Object.values(state.habits).forEach(day => {
                if(day.treino) completed++;
                if(day.dieta) completed++;
            });

            const percent = Math.round((completed / total) * 100);
            const bar = document.getElementById('progress-bar');
            const text = document.getElementById('progress-text');
            
            if(bar) bar.style.width = percent + '%';
            if(text) text.innerText = percent + '% Completo';
        }

        // Lembretes
        function initReminder() {
            const savedState = localStorage.getItem('waterReminder');
            if (savedState === 'true') {
                if (Notification.permission === "granted") {
                    startReminder(false);
                } else {
                    localStorage.setItem('waterReminder', 'false');
                }
            }
        }

        function startReminder(showToast) {
            state.reminderActive = true;
            localStorage.setItem('waterReminder', 'true');
            updateReminderButton(true);

            if (showToast) {
                new Notification("Lembretes ativados! üíß", {
                    body: "Vou te avisar a cada 1 hora para beber √°gua!",
                    // üü¢ √çcone ajustado para usar a mesma l√≥gica do PWA
                    icon: iconUrl || "https://cdn-icons-png.flaticon.com/512/3076/3076134.png"
                });
            }

            if (reminderInterval) clearInterval(reminderInterval);
            reminderInterval = setInterval(() => {
                new Notification("Hora de beber √°gua, Bestie! üíÖ", {
                    body: "Sua meta de 3.5L est√° esperando!",
                    // üü¢ √çcone ajustado para usar a mesma l√≥gica do PWA
                    icon: iconUrl || "https://cdn-icons-png.flaticon.com/512/3076/3076134.png"
                });
            }, 3600000);
        }

        function stopReminder() {
            state.reminderActive = false;
            localStorage.setItem('waterReminder', 'false');
            clearInterval(reminderInterval);
            updateReminderButton(false);
            alert("Lembretes pausados.");
        }

        function updateReminderButton(isActive) {
            const btn = document.getElementById("btn-reminder");
            if (!btn) return;
            if (isActive) {
                btn.classList.remove("bg-sky-100", "text-sky-600", "border-sky-200");
                btn.classList.add("bg-sky-500", "text-white", "border-sky-500", "bell-ring");
                btn.innerHTML = "üîï";
            } else {
                btn.classList.remove("bg-sky-500", "text-white", "border-sky-500", "bell-ring");
                btn.classList.add("bg-sky-100", "text-sky-600", "border-sky-200");
                btn.innerHTML = "üîî";
            }
        }

        // Inicializar
        initApp();

        // --- Gr√°ficos (Escopo Global para Chart.js) ---
        const ctxHydro = document.getElementById('hydrationChart').getContext('2d');
        const hydrationChart = new Chart(ctxHydro, {
            type: 'doughnut',
            data: {
                labels: ['Bebido', 'Falta'],
                datasets: [{
                    data: [0, 3500],
                    backgroundColor: ['#0ea5e9', '#e0f2fe'], 
                    borderWidth: 0,
                    borderRadius: 20, 
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '80%', 
                plugins: { legend: { display: false }, tooltip: { enabled: false } }
            }
        });

        const ctxPlate = document.getElementById('plateChart').getContext('2d');
        new Chart(ctxPlate, {
            type: 'pie',
            data: {
                labels: ['Salada', 'Prote√≠na', 'Carbo/Energia'],
                datasets: [{
                    data: [50, 25, 25],
                    backgroundColor: ['#22c55e', '#f43f5e', '#eab308'],
                    borderWidth: 0,
                    hoverOffset: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } }
            }
        });
    </script>
</body>
</html>
