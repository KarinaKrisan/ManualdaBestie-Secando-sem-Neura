<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual da Bestie - Secando sem Neura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        bestie: {
                            light: '#ffe4e6', // rose-100
                            DEFAULT: '#fb7185', // rose-400
                            dark: '#be123c', // rose-700
                            bg: '#fff1f2', // rose-50
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #fff1f2;
            -webkit-tap-highlight-color: transparent;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Loading Animation Styles */
        .typing-indicator span {
            display: inline-block;
            width: 6px;
            height: 6px;
            background-color: #fb7185;
            border-radius: 50%;
            animation: typing 1s infinite;
            margin: 0 2px;
        }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body class="text-gray-700 pb-20">

    <!-- Header -->
    <header class="fixed top-0 w-full z-40 bg-white/90 backdrop-blur-md shadow-sm border-b border-pink-100">
        <div class="max-w-md mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-bestie text-white flex items-center justify-center">
                    <i class="fa-solid fa-heart text-sm"></i>
                </div>
                <h1 class="font-bold text-lg text-bestie-dark tracking-wide">Manual da Bestie</h1>
            </div>
            <button class="w-8 h-8 rounded-full bg-pink-50 text-bestie flex items-center justify-center hover:bg-pink-100 transition">
                <i class="fa-regular fa-bell"></i>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-md mx-auto pt-20 px-4 min-h-screen" id="app-content">
        <!-- Content inject via JS -->
    </main>

    <!-- Recipe Details Modal (Hidden by default) -->
    <div id="recipe-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" onclick="closeRecipeModal()"></div>
        <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl h-[85vh] overflow-y-auto transform transition-transform duration-300 translate-y-full md:max-w-md md:mx-auto md:inset-x-0" id="modal-panel">
            <!-- Modal Content -->
            <div class="relative">
                <div id="modal-image-container" class="h-56 bg-gray-200 relative">
                    <img id="modal-img" src="" alt="Recipe" class="w-full h-full object-cover rounded-t-3xl">
                    <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-t from-black/60 to-transparent"></div>
                    <button onclick="closeRecipeModal()" class="absolute top-4 right-4 w-8 h-8 bg-white/20 backdrop-blur text-white rounded-full flex items-center justify-center">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                
                <div class="p-6 -mt-6 bg-white rounded-t-3xl relative">
                    <div class="w-12 h-1 bg-gray-300 rounded-full mx-auto mb-6"></div>
                    
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span id="modal-tag" class="text-xs font-semibold text-bestie uppercase tracking-wider bg-pink-50 px-2 py-1 rounded-md">Categoria</span>
                            <h2 id="modal-title" class="text-2xl font-bold text-gray-800 mt-1 leading-tight">Nome da Receita</h2>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="text-lg font-bold text-bestie-dark whitespace-nowrap"><span id="modal-cal">0</span> kcal</span>
                        </div>
                    </div>
                    
                    <p id="modal-desc" class="text-sm text-gray-500 mb-4 italic leading-relaxed">
                        <!-- Description injected here -->
                    </p>

                    <div class="flex items-center gap-4 text-sm text-gray-500 mb-6 border-y border-pink-50 py-3 justify-between px-2">
                        <div class="flex items-center gap-1">
                            <i class="fa-regular fa-clock text-bestie"></i>
                            <span id="modal-time">0 min</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-fire text-bestie"></i>
                            <span id="modal-difficulty">F√°cil</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <i class="fa-solid fa-user-group text-bestie"></i>
                            <span id="modal-yield">2 por√ß√µes</span>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
                            <i class="fa-solid fa-basket-shopping text-bestie"></i> Ingredientes
                        </h3>
                        <ul id="modal-ingredients" class="space-y-2 text-sm text-gray-600 pl-2">
                            <!-- JS Inject -->
                        </ul>
                    </div>

                    <div class="mb-8">
                        <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2">
                            <i class="fa-solid fa-spoon text-bestie"></i> Modo de Preparo
                        </h3>
                        <div id="modal-instructions" class="space-y-4 text-sm text-gray-600">
                            <!-- JS Inject -->
                        </div>
                    </div>
                    
                    <button class="w-full py-3 bg-bestie text-white font-semibold rounded-xl shadow-lg shadow-pink-200 hover:bg-bestie-dark transition active:scale-95">
                        <i class="fa-regular fa-heart mr-2"></i> Salvar nos Favoritos
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 w-full z-40 bg-white border-t border-pink-100 pb-safe">
        <div class="max-w-md mx-auto px-6 h-16 flex items-center justify-between">
            <button onclick="navigate('home')" class="nav-btn active flex flex-col items-center gap-1 text-bestie">
                <i class="fa-solid fa-house text-xl mb-0.5"></i>
                <span class="text-[10px] font-medium">In√≠cio</span>
            </button>
            <button onclick="navigate('recipes')" class="nav-btn flex flex-col items-center gap-1 text-gray-400 hover:text-bestie transition">
                <i class="fa-solid fa-utensils text-xl mb-0.5"></i>
                <span class="text-[10px] font-medium">Receitas</span>
            </button>
            <div class="relative -top-5">
                <button class="w-12 h-12 rounded-full bg-bestie text-white flex items-center justify-center shadow-lg shadow-pink-300 hover:scale-105 transition">
                    <i class="fa-solid fa-plus text-xl"></i>
                </button>
            </div>
            <button onclick="navigate('calculator')" class="nav-btn flex flex-col items-center gap-1 text-gray-400 hover:text-bestie transition">
                <i class="fa-solid fa-calculator text-xl mb-0.5"></i>
                <span class="text-[10px] font-medium">Calc</span>
            </button>
            <button onclick="navigate('profile')" class="nav-btn flex flex-col items-center gap-1 text-gray-400 hover:text-bestie transition">
                <i class="fa-regular fa-user text-xl mb-0.5"></i>
                <span class="text-[10px] font-medium">Perfil</span>
            </button>
        </div>
    </nav>

    <script>
        // --- GEMINI API SETUP ---
        const apiKey = ""; // Environment will provide key

        async function callGemini(ingredients) {
            const prompt = `Voc√™ √© a 'Bestie Fit', uma chef especialista em receitas saud√°veis, pr√°ticas e com poucas calorias para o aplicativo 'Manual da Bestie'. 
            Crie uma receita criativa e saud√°vel (fit/low carb/proteica) usando OBRIGATORIAMENTE estes ingredientes principais: ${ingredients}. Voc√™ pode sugerir temperos b√°sicos extras.
            
            IMPORTANTE: Responda APENAS com um objeto JSON v√°lido (sem markdown, sem \`\`\`json) seguindo exatamente esta estrutura:
            {
                "title": "Nome Criativo da Receita",
                "calories": 000 (apenas numero),
                "time": "00 min",
                "difficulty": "F√°cil",
                "yield": "1 ou 2 por√ß√µes",
                "description": "Uma descri√ß√£o curta, animada e motivadora estilo 'bestie'",
                "ingredients": ["ingrediente 1", "ingrediente 2"],
                "instructions": ["passo 1", "passo 2", "passo 3"],
                "category": "almoco" (escolha entre: cafe, almoco, jantar, lanche, doces)
            }`;

            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                generationConfig: {
                    responseMimeType: "application/json"
                }
            };

            try {
                // Retry logic (simple version)
                let response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error('Erro na API');

                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                return JSON.parse(text);

            } catch (error) {
                console.error("Erro Gemini:", error);
                return null;
            }
        }

        // --- DATA ---
        // Tags: 'cafe', 'almoco', 'jantar', 'lanche', 'vegano', 'vegetariano', 'proteina', 'lowcarb', 'lowfat', 'zeroacucar', 'lowcal', 'simples', 'rapido'
        
        const recipes = [
            // --- NOVAS RECEITAS DE CAF√â DA MANH√É ---
            {
                id: 30,
                title: "Muffins de prote√≠na (Salgados)",
                displayCategory: "Caf√© Proteico",
                tags: ['cafe', 'lanche', 'proteina', 'lowcal', 'lowcarb', 'simples'],
                calories: 41,
                time: "35 min",
                difficulty: "F√°cil",
                yield: "9 por√ß√µes",
                description: "Precisando de uma inje√ß√£o de prote√≠na? Estes muffins salgados s√£o perfeitos para come√ßar o dia bem. Apenas 41 cal por unidade!",
                image: "https://images.unsplash.com/photo-1623428187969-5da2dcea5ebf?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1¬Ω tomates", "2 cebolinhas verdes", "Manjeric√£o fresco", "3 ovos", "2 claras de ovo", "Sal e pimenta"],
                instructions: ["Pique tomates, cebolinha e manjeric√£o.", "Misture ovos e claras, tempere.", "Distribua em formas, adicione os vegetais e asse a 175¬∞C por 25 min."]
            },
            {
                id: 29,
                title: "Muffin de banana e chocolate",
                displayCategory: "Doce Fit",
                tags: ['cafe', 'lanche', 'doces', 'vegetariano', 'simples', 'lowcal'],
                calories: 152,
                time: "25 min",
                difficulty: "F√°cil",
                yield: "9 por√ß√µes",
                description: "Energia da banana com a alegria do chocolate. Perfeito para um caf√© da manh√£ sem culpa.",
                image: "https://images.unsplash.com/photo-1607958996333-41aef7caefaa?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Mel (20g)", "1 ovo", "Farinha integral (165g)", "Fermento", "Chocolate meio amargo (20g)", "4 bananas maduras"],
                instructions: ["Esmague bananas, bata com ovo e mel.", "Junte farinha e fermento.", "Coloque nas formas, salpique chocolate e asse a 180¬∞C por 20 min."]
            },
            {
                id: 28,
                title: "Ovos mexidos com espinafre e feta",
                displayCategory: "Caf√© Low Carb",
                tags: ['cafe', 'almoco', 'vegetariano', 'proteina', 'lowcarb', 'simples', 'rapido'],
                calories: 546,
                time: "10 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Simples, gostoso e saud√°vel. Uma vers√£o apetitosa dos ovos mexidos tradicionais.",
                image: "https://images.unsplash.com/photo-1510629918615-10775139900e?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 tomate", "Espinafre fresco (40g)", "√ìleo de coco", "3 ovos", "Queijo feta light (100g)"],
                instructions: ["Refogue tomate e espinafre no √≥leo de coco.", "Adicione ovos batidos e temperados.", "Quando firmar, esmigalhe o feta por cima."]
            },
            {
                id: 27,
                title: "Triguilho com framboesas",
                displayCategory: "Caf√© Energia",
                tags: ['cafe', 'vegetariano', 'simples', 'rapido'],
                calories: 467,
                time: "10 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Comece o dia com plena saciedade. Pode guardar para o dia seguinte e ganhar minutos de sono!",
                image: "https://images.unsplash.com/photo-1517673132405-a56a62b18caf?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Iogurte grego (190g)", "Caf√© espresso em p√≥", "Ado√ßante", "Triguilho (40g)", "Am√™ndoas (15g)", "Framboesas"],
                instructions: ["Prepare o triguilho conforme embalagem.", "Pique am√™ndoas.", "Misture tudo, exceto framboesas. Use-as para decorar."]
            },
            {
                id: 26,
                title: "Rabanada de morango",
                displayCategory: "Caf√© Especial",
                tags: ['cafe', 'vegetariano', 'doces', 'simples', 'rapido'],
                calories: 260,
                time: "10 min",
                difficulty: "F√°cil",
                yield: "2 por√ß√µes",
                description: "Um cl√°ssico! Com morangos frescos e canela, fica ainda mais gostosa e saud√°vel.",
                image: "https://images.unsplash.com/photo-1484723091739-30a097e8f929?auto=format&fit=crop&q=80&w=600",
                ingredients: ["2 ovos", "Canela", "P√£o integral (4 fatias)", "Morango (100g)", "Leite desnatado (80mL)"],
                instructions: ["Bata ovos, leite e canela.", "Passe o p√£o na mistura e toste na frigideira.", "Cubra com morangos esmagados."]
            },
            {
                id: 25,
                title: "Sandu√≠che de tomate e ovos",
                displayCategory: "Caf√© Pr√°tico",
                tags: ['cafe', 'almoco', 'vegetariano', 'proteina', 'normal'],
                calories: 240,
                time: "15 min",
                difficulty: "Normal",
                yield: "2 por√ß√µes",
                description: "Perfeito para levar. Proporciona saciedade e mant√©m as calorias sob controle.",
                image: "https://images.unsplash.com/photo-1525351484163-7529414395d8?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 ovo", "Alcaparra", "2 tomates", "Iogurte grego (100g)", "P√£o integral (4 fatias)", "Alface e manjeric√£o"],
                instructions: ["Cozinhe os ovos, pique e misture com iogurte e alcaparras.", "Toste o p√£o.", "Monte com a pasta de ovos e salada."]
            },

            // --- RECEITAS ANTERIORES ---
            {
                id: 16,
                title: "Mingau de aveia chocolate e morango",
                displayCategory: "Caf√© Vegano",
                tags: ['cafe', 'vegano', 'vegetariano', 'doces', 'simples'],
                calories: 389,
                time: "10 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Caf√© da manh√£ perfeito para quem adora um doce! A aveia d√° saciedade e a banana ado√ßa naturalmente.",
                image: "https://images.unsplash.com/photo-1517093157656-b9ecdb90eb11?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Banana m√©dia (150 g)", "Aveia (40 g)", "Leite de am√™ndoa sem a√ß√∫car (120 mL)", "Cacau em p√≥ (15 g)", "Morango (60 g)"],
                instructions: ["Esmague a banana e aque√ßa com a aveia, leite e cacau.", "Cozinhe por 3 min mexendo sempre.", "Sirva com morangos picados."]
            },
            {
                id: 17,
                title: "Cereal crocante de canela",
                displayCategory: "Caf√©/Lanche",
                tags: ['cafe', 'lanche', 'vegano', 'vegetariano', 'lowcarb'],
                calories: 455,
                time: "85 min",
                difficulty: "Normal",
                yield: "4 por√ß√µes",
                description: "N√£o quer abrir m√£o do cereal crocante? Essa vers√£o caseira √© cheia de fibra e promove saciedade.",
                image: "https://images.unsplash.com/photo-1514733670139-4d87a1941d55?auto=format&fit=crop&q=80&w=600",
                ingredients: ["√ìleo de coco (90 mL)", "Am√™ndoa triturada (150 g)", "Farinha de linha√ßa (28 g)", "Canela (3 colheres de ch√°)", "Ado√ßante e sal a gosto"],
                instructions: ["Misture o √≥leo derretido com ingredientes secos formando uma massa. Gele por 1h.", "Abra a massa, corte, pincele √≥leo e asse a 150¬∞C por 20 min.", "Espere esfriar para ficar crocante."]
            },
            {
                id: 18,
                title: "Overnight de am√™ndoa e framboesa",
                displayCategory: "Caf√© Pr√°tico",
                tags: ['cafe', 'vegano', 'vegetariano', 'simples', 'zeroacucar'],
                calories: 286,
                time: "3h+",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Prepare na noite anterior! Aveia deixada de molho fica cremosa e deliciosa.",
                image: "https://images.unsplash.com/photo-1509722747041-616f39b57569?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Aveia (40 g)", "Am√™ndoa triturada (10 g)", "Canela e cardamomo", "Leite de am√™ndoa (100 mL)", "Framboesa (50 g)"],
                instructions: ["Misture os secos no copo.", "Adicione leite e parte das framboesas.", "Decore com o resto. Deixe na geladeira por no m√≠nimo 3h."]
            },
            {
                id: 19,
                title: "Mingau de aveia banana e morango",
                displayCategory: "Caf√© R√°pido",
                tags: ['cafe', 'vegano', 'vegetariano', 'rapido', 'simples', 'lowcal'],
                calories: 373,
                time: "8 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Receita de microondas! Do√ßura natural da banana, sem a√ß√∫car extra.",
                image: "https://images.unsplash.com/photo-1518843875459-f738682238a6?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Banana m√©dia (150 g)", "Aveia (40 g)", "Leite de am√™ndoa (80 mL)", "√Ågua (60 mL)", "Canela, morango e chia"],
                instructions: ["Esmague a banana, misture com aveia e l√≠quidos.", "Microondas por 2 min, mexa, mais 30s.", "Sirva com frutas e chia."]
            },
            {
                id: 20,
                title: "Smoothie verde de espinafre",
                displayCategory: "Detox",
                tags: ['lanche', 'vegano', 'vegetariano', 'lowcal', 'rapido', 'simples'],
                calories: 273,
                time: "5 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Surpreendentemente gostoso! A combina√ß√£o de laranja e banana mascara o sabor do espinafre.",
                image: "https://images.unsplash.com/photo-1610970881699-44a5587cabec?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Espinafre fresco (50 g)", "Hortel√£", "1 banana", "2 laranjas", "Leite de am√™ndoa (100 mL)"],
                instructions: ["Lave o espinafre.", "Esprema as laranjas.", "Bata tudo no liquidificador por 2 minutos."]
            },
            {
                id: 21,
                title: "Cereal crocante de trigo-vermelho",
                displayCategory: "Caf√© Caseiro",
                tags: ['cafe', 'vegano', 'vegetariano', 'simples'],
                calories: 413,
                time: "15 min",
                difficulty: "Normal",
                yield: "1 por√ß√£o",
                description: "Fa√ßa seu pr√≥prio cereal em casa assando flocos de trigo com banana.",
                image: "https://images.unsplash.com/photo-1595981267035-7b04ca84a82d?auto=format&fit=crop&q=80&w=600",
                ingredients: ["¬Ω banana", "√ìleo de coco", "Leite de am√™ndoa", "Cranberry", "Xarope de agave", "Flocos de trigo-vermelho (60 g)"],
                instructions: ["Fa√ßa uma pasta com a banana, √≥leo, agave e trigo.", "Asse a 175¬∞C por 10 min.", "Quebre em peda√ßos e sirva com leite."]
            },
            {
                id: 22,
                title: "Bruschetta de avocado",
                displayCategory: "Lanche Salgado",
                tags: ['lanche', 'jantar', 'vegano', 'vegetariano', 'simples'],
                calories: 427,
                time: "15 min",
                difficulty: "F√°cil",
                yield: "2 por√ß√µes",
                description: "Muito mais que um antepasto! Excelente refei√ß√£o leve ou entrada refinada.",
                image: "https://images.unsplash.com/photo-1572656631137-7935297eff55?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Baguete integral (125 g)", "Azeite", "2 tomates", "Alho e cebola", "1 avocado", "Lim√£o, coentro e temperos"],
                instructions: ["Asse as fatias de p√£o com azeite.", "Misture tomate picado, alho, cebola e azeite.", "Misture avocado picado com lim√£o.", "Junte tudo, tempere e cubra os p√£es."]
            },
            {
                id: 23,
                title: "Misto quente de batata-doce",
                displayCategory: "Pr√©-Treino",
                tags: ['lanche', 'cafe', 'vegano', 'vegetariano', 'simples'],
                calories: 303,
                time: "28 min",
                difficulty: "F√°cil",
                yield: "3 por√ß√µes",
                description: "Use fatias de batata-doce como 'p√£o'! Recheio energ√©tico de pasta de amendoim e banana.",
                image: "https://images.unsplash.com/photo-1596241772656-e918c5e69317?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 batata-doce (150 g)", "1¬Ω bananas", "Pasta de amendoim (80 g)", "Farinha de linha√ßa"],
                instructions: ["Corte a batata em fatias e asse por 20 min a 200¬∞C (ou use torradeira).", "Cubra com pasta de amendoim e rodelas de banana.", "Salpique linha√ßa."]
            },
            {
                id: 24,
                title: "Geleia de morango com chia",
                displayCategory: "Doce Fit",
                tags: ['doces', 'vegano', 'vegetariano', 'lowcal', 'zeroacucar', 'simples'],
                calories: 12,
                time: "15 min",
                difficulty: "F√°cil",
                yield: "20 por√ß√µes",
                description: "Sem a√ß√∫car refinado e cheia de sabor! A chia ajuda a dar a consist√™ncia de geleia.",
                image: "https://images.unsplash.com/photo-1589114672621-c276378e9f50?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Morango (400 g)", "Hortel√£ fresca", "Ado√ßante a gosto", "Chia (20 g)"],
                instructions: ["Cozinhe os morangos com hortel√£ e ado√ßante.", "Bata com mixer.", "Adicione chia e cozinhe por mais 5 min at√© engrossar."]
            },
            {
                id: 15,
                title: "Shake de prote√≠na de chocolate",
                displayCategory: "Pr√©-Treino/Lanche",
                tags: ['lanche', 'proteina', 'rapido', 'simples', 'zeroacucar'],
                calories: 284,
                time: "5 min",
                difficulty: "F√°cil",
                yield: "2 por√ß√µes",
                description: "Shake r√°pido e delicioso! O cacau em p√≥ d√° o sabor e a prote√≠na promove saciedade. √ìtima op√ß√£o pr√©-treino.",
                image: "https://images.unsplash.com/photo-1620916297397-a4a5402a3c6c?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "1 banana madura (150 g)",
                    "√Ågua (300 mL)",
                    "Farinha de linha√ßa (2 colheres de sopa, 20 g)",
                    "Aveia (3 colheres de sopa, 24 g)",
                    "Prote√≠na em p√≥ (2 colheres de sopa, 24 g)",
                    "Cacau em p√≥ (10 g)",
                    "Pasta de amendoim (1 colher de sopa, 20 g)"
                ],
                instructions: [
                    "Descasque a banana.",
                    "Coloque-a no liquidificador junto com os outros ingredientes e bata at√© obter um creme.",
                    "Aproveite!"
                ]
            },
            {
                id: 14,
                title: "Shake proteico de frutas vermelhas",
                displayCategory: "P√≥s-Treino",
                tags: ['lanche', 'proteina', 'lowcal', 'lowfat', 'rapido', 'zeroacucar'],
                calories: 163,
                time: "9 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Leve e proteico, feito com claras pasteurizadas e iogurte. Perfeito para recupera√ß√£o muscular com baixas calorias.",
                image: "https://images.unsplash.com/photo-1599458316239-015848c08192?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Linha√ßa (5 g)",
                    "√Ågua (1 colher de sopa, 15 mL)",
                    "3 claras de ovo (105 g)",
                    "Iogurte natural sem gordura (100 g)",
                    "Frutas vermelhas congeladas (100 g)",
                    "Extrato de baunilha em p√≥ (1 g)",
                    "Eritritol em p√≥ (1 colher de sopa, 7 g)"
                ],
                instructions: [
                    "Deixe a linha√ßa de molho na √°gua por cerca de 5 minutos.",
                    "Em um liquidificador, bata as claras com o iogurte e a linha√ßa.",
                    "Adicione o eritritol, as frutas vermelhas e a baunilha e bata mais uma vez, at√© obter um smoothie cremoso.",
                    "Transfira para um copo e beba imediatamente."
                ]
            },
            {
                id: 13,
                title: "Shake de mirtilo e coco",
                displayCategory: "Proteico Caseiro",
                tags: ['lanche', 'proteina', 'rapido', 'simples', 'cafe'],
                calories: 358,
                time: "5 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Alternativa saud√°vel aos shakes industrializados. O ingrediente principal √© o iogurte grego, garantindo prote√≠nas de qualidade sem aditivos artificiais.",
                image: "https://images.unsplash.com/photo-1620916297397-a4a5402a3c6c?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Iogurte grego natural, sem gordura (300 g)",
                    "Mirtilo (125 g)",
                    "Flocos de coco (1 colher de sopa, 5 g)",
                    "Leite semidesnatado (100 mL)"
                ],
                instructions: [
                    "Coloque o iogurte, o leite, o mirtilo e os flocos de coco em um liquidificador e bata em alta velocidade at√© que a mistura fique homog√™nea.",
                    "Sirva com alguns flocos de coco por cima.",
                    "Aproveite!"
                ]
            },
            {
                id: 12,
                title: "Smoothie de banana e t√¢mara",
                displayCategory: "Caf√©/Lanche",
                tags: ['cafe', 'lanche', 'vegano', 'vegetariano', 'zeroacucar', 'simples'],
                calories: 237,
                time: "15 min",
                difficulty: "F√°cil",
                yield: "2 por√ß√µes",
                description: "Delicioso e refrescante, dispensa ado√ßantes gra√ßas √†s t√¢maras. Dica: Deixe as t√¢maras de molho no leite durante a noite se tiver pressa pela manh√£.",
                image: "https://images.unsplash.com/photo-1596450522030-9b45663673c2?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "T√¢mara, sem caro√ßo (90 g)",
                    "Leite de am√™ndoa (350 mL)",
                    "1 banana pequena (75 g)",
                    "Manteiga de am√™ndoa (2 colheres de ch√°, 8 g)",
                    "5 cubos de gelo (110 g)"
                ],
                instructions: [
                    "Para come√ßar, coloque as t√¢maras de molho em √°gua fervente por 10 minutos para amolecer.",
                    "Escoe a √°gua das t√¢maras.",
                    "Adicione todos os ingredientes em um liquidificador e bata at√© obter uma consist√™ncia cremosa.",
                    "Aproveite!"
                ]
            },
            {
                id: 11,
                title: "Shake de prote√≠na com pasta de amendoim",
                displayCategory: "Proteico",
                tags: ['lanche', 'proteina', 'rapido', 'simples', 'zeroacucar'],
                calories: 402,
                time: "5 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Pasta de amendoim √© um dos lanches preferidos dos atletas. Servida em um shake, √© uma fonte de prote√≠nas excelente e deliciosa.",
                image: "https://images.unsplash.com/photo-1550583724-b2692b85b150?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Leite de am√™ndoa, sem a√ß√∫car (150 mL)",
                    "Pasta de amendoim (1 colher de sopa, 20 g)",
                    "1 banana madura (150 g)",
                    "Canela (a gosto)",
                    "Prote√≠na em p√≥, sabor chocolate (30 g)"
                ],
                instructions: [
                    "Coloque todos os ingredientes no liquidificador e misture at√© obter uma mistura homog√™nea.",
                    "Consuma imediatamente."
                ]
            },
            {
                id: 10,
                title: "Shake de banana e nozes",
                displayCategory: "P√≥s-Treino/Caf√©",
                tags: ['cafe', 'lanche', 'proteina', 'rapido', 'simples'],
                calories: 434,
                time: "5 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Nosso shake poderoso com banana, nozes e mel funciona muito bem para estimular seu metabolismo. Ideal p√≥s-treino ou ao acordar.",
                image: "https://images.unsplash.com/photo-1593094406256-4299b90c1f6b?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Iogurte grego natural, sem gordura (150 g)",
                    "Leite de am√™ndoa, sem a√ß√∫car (300 mL)",
                    "Mel (1 colher de ch√°, 10 g)",
                    "¬Ω banana (75 g)",
                    "Nozes, picadas (24 g)"
                ],
                instructions: [
                    "Coloque todos os ingredientes, exceto 2 ou 3 nozes, no liquidificador e bata.",
                    "Coloque o shake em um copo e decore com as nozes restantes.",
                    "Aproveite!"
                ]
            },
            {
                id: 9,
                title: "Smoothie de Morango e Banana",
                displayCategory: "Caf√©/Lanche",
                tags: ['cafe', 'lanche', 'vegetariano', 'rapido', 'simples', 'lowcal'],
                calories: 150,
                time: "5 min",
                difficulty: "F√°cil",
                yield: "2 por√ß√µes",
                description: "Smoothies podem ser preparados rapidamente e s√£o cheios de frutas frescas. A banana garante a do√ßura desta receita. Uma del√≠cia refrescante!",
                image: "https://images.unsplash.com/photo-1626078298288-06795f590b5d?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Morango (200 g)",
                    "1 Banana (150 g)",
                    "Iogurte light (180 g)",
                    "Cubos de gelo (50 g)"
                ],
                instructions: [
                    "Lave os morangos e coloque-os em um liquidificador.",
                    "Corte a banana em peda√ßos e adicione ao liquidificador com o resto dos ingredientes.",
                    "Bata at√© obter uma mistura lisa.",
                    "Aproveite!"
                ]
            },
            {
                id: 8,
                title: "Shake de Chocolate e Hortel√£",
                displayCategory: "Caf√©/Lanche",
                tags: ['cafe', 'lanche', 'vegano', 'vegetariano', 'zeroacucar', 'simples', 'rapido'],
                calories: 232,
                time: "3 min",
                difficulty: "F√°cil",
                yield: "2 por√ß√µes",
                description: "Nosso shake de chocolate com um toque de hortel√£ √© √≥timo para o caf√© da manh√£ ou para um lanche. A do√ßura natural da banana e os √°cidos graxos saud√°veis do avocado promover√£o saciedade.",
                image: "https://images.unsplash.com/photo-1577805947697-89e18249d767?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Cacau em p√≥ (2 colheres de sopa, 30 g)",
                    "Hortel√£ fresca (10 g)",
                    "¬Ω avocado (110 g)",
                    "1 banana madura (150 g)",
                    "Leite de am√™ndoas n√£o ado√ßado (300 mL)"
                ],
                instructions: [
                    "Corte o avocado e a banana em peda√ßos pequenos. Misture com os outros ingredientes e bata tudo em um liquidificador.",
                    "Distribua o shake em dois copos e decore com folha de hortel√£.",
                    "Aproveite!"
                ]
            },
            {
                id: 7,
                title: "Lassi de Manga",
                displayCategory: "Caf√© da Manh√£",
                tags: ['cafe', 'lanche', 'vegetariano', 'simples', 'rapido', 'lowcal', 'lowfat'],
                calories: 211,
                time: "3 min",
                difficulty: "Muito F√°cil",
                yield: "2 por√ß√µes",
                description: "Este shake de manga √© uma bebida de beleza. A manga cont√©m betacaroteno, que protege as c√©lulas. Dica: Use cubos de gelo para deixar bem refrescante!",
                image: "https://images.unsplash.com/photo-1623065422902-30a2d299bbe4?auto=format&fit=crop&q=80&w=600",
                ingredients: [
                    "Manga em cubos, congelada (300 g)", 
                    "Iogurte light (300 g)", 
                    "Mel (1 colher de sopa, 20 g)", 
                    "Cardamomo em p√≥ (5 g)"
                ],
                instructions: [
                    "Bata todos os ingredientes no liquidificador.", 
                    "Sirva bem gelado e aproveite!"
                ]
            },
            {
                id: 6,
                title: "Br√≥colis e couve-flor ao forno",
                displayCategory: "Almo√ßo/Jantar",
                tags: ['almoco', 'jantar', 'vegetariano', 'lowcarb', 'lowcal', 'lowfat'],
                calories: 356,
                time: "25 min",
                difficulty: "Normal",
                yield: "2 por√ß√µes",
                description: "Este prato de br√≥colis e couve-flor √© muito saboroso. Gra√ßas ao molho cremoso de queijo, voc√™ vai ficar saciado(a) por um bom tempo.",
                image: "https://images.unsplash.com/photo-1612158652932-55dd1d713c23?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Couve-flor (200 g)", "Br√≥colis (200 g)", "Queijo alpino ralado (100 g)", "Creme azedo (45 g)", "Azeite e temperos"],
                instructions: ["Lave a couve-flor e o br√≥colis e corte-os. Cozinhe por 7 minutos.", "Misture o queijo com o creme azedo e temperos.", "Coloque os vegetais na assadeira, cubra com molho.", "Asse a 160¬∞C por 15 minutos."]
            },
            {
                id: 1,
                title: "Crepioca Fit",
                displayCategory: "Caf√© da Manh√£",
                tags: ['cafe', 'proteina', 'zeroacucar', 'simples', 'rapido', 'lowcal'],
                calories: 180,
                time: "10 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "A queridinha das dietas! Pr√°tica, r√°pida e vers√°til para come√ßar o dia.",
                image: "https://images.unsplash.com/photo-1513442542250-854d436a73f2?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 ovo", "2 colheres (sopa) de goma de tapioca", "1 colher (sopa) de requeij√£o light", "Sal a gosto"],
                instructions: ["Bata o ovo com a tapioca e o requeij√£o.", "Tempere com sal.", "Despeje em uma frigideira antiaderente untada.", "Doure dos dois lados e sirva recheado a gosto."]
            },
            {
                id: 2,
                title: "Salada de Pote",
                displayCategory: "Almo√ßo Pr√°tico",
                tags: ['almoco', 'jantar', 'lowcal', 'lowcarb', 'proteina', 'rapido', 'simples'],
                calories: 320,
                time: "15 min",
                difficulty: "F√°cil",
                yield: "1 pote",
                description: "Perfeita para levar para o trabalho. O segredo est√° na ordem dos ingredientes!",
                image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Mix de folhas", "100g de frango desfiado", "Tomate cereja", "Cenoura ralada", "Molho de iogurte"],
                instructions: ["Comece colocando o molho no fundo do pote.", "Adicione a cenoura e o tomate.", "Coloque o frango.", "Finalize com as folhas."]
            },
            {
                id: 3,
                title: "Overnight Oats",
                displayCategory: "Caf√©/Lanche",
                tags: ['cafe', 'lanche', 'vegetariano', 'simples', 'rapido', 'zeroacucar'],
                calories: 250,
                time: "5 min",
                difficulty: "Muito F√°cil",
                yield: "1 pote",
                description: "Caf√© da manh√£ pronto para quem acorda na correria.",
                image: "https://images.unsplash.com/photo-1517519014922-8fc5e6211605?auto=format&fit=crop&q=80&w=600",
                ingredients: ["30g de aveia em flocos", "100ml de leite vegetal", "1 colher de chia", "Frutas vermelhas"],
                instructions: ["Misture a aveia, o leite e a chia em um pote.", "Deixe na geladeira durante a noite.", "Na manh√£ seguinte, adicione as frutas."]
            },
            {
                id: 4,
                title: "Brigadeiro de Whey",
                displayCategory: "Doce Fit",
                tags: ['lanche', 'proteina', 'zeroacucar', 'simples', 'rapido'],
                calories: 120,
                time: "15 min",
                difficulty: "F√°cil",
                yield: "5 bolinhas",
                description: "Para matar a vontade de doce sem sair da dieta.",
                image: "https://images.unsplash.com/photo-1541783245831-57d6fb0926d3?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 scoop de Whey Protein chocolate", "1 colher de cacau em p√≥", "Leite em p√≥ desnatado", "√Ågua"],
                instructions: ["Misture todos os secos.", "V√° adicionando √°gua morna aos poucos at√© dar ponto.", "Enrole e gele."]
            },
            {
                id: 5,
                title: "Panqueca de Banana",
                displayCategory: "Caf√© da Manh√£",
                tags: ['cafe', 'lanche', 'zeroacucar', 'simples', 'rapido', 'lowfat', 'vegetariano'],
                calories: 210,
                time: "10 min",
                difficulty: "F√°cil",
                yield: "1 por√ß√£o",
                description: "Apenas 3 ingredientes para um lanche saud√°vel.",
                image: "https://images.unsplash.com/photo-1506084868230-bb9d95c24759?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 banana madura amassada", "2 ovos", "Canela a gosto"],
                instructions: ["Misture a banana com os ovos e canela.", "Aque√ßa a frigideira untada.", "Fa√ßa discos e doure dos dois lados."]
            }
        ];

        const views = {
            home: `
                <div class="fade-in space-y-6">
                    <div class="bg-gradient-to-r from-bestie to-pink-400 rounded-3xl p-6 text-white shadow-lg shadow-pink-200">
                        <p class="text-pink-100 text-sm font-medium mb-1">Bom dia, Bestie! ‚ú®</p>
                        <h2 class="text-2xl font-bold mb-4">Vamos secar hoje?</h2>
                        <div class="flex gap-3">
                            <div class="bg-white/20 backdrop-blur rounded-xl p-3 flex-1">
                                <span class="block text-xs text-pink-100">√Ågua</span>
                                <span class="font-bold text-lg">1.2L</span>
                            </div>
                            <div class="bg-white/20 backdrop-blur rounded-xl p-3 flex-1">
                                <span class="block text-xs text-pink-100">Meta</span>
                                <span class="font-bold text-lg">55kg</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-bold text-lg text-gray-800">Atalhos</h3>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="navigate('recipes')" class="bg-white p-4 rounded-2xl shadow-sm border border-pink-50 flex flex-col items-center gap-2 hover:border-bestie transition group">
                                <div class="w-12 h-12 rounded-full bg-green-100 text-green-500 flex items-center justify-center group-hover:scale-110 transition">
                                    <i class="fa-solid fa-leaf"></i>
                                </div>
                                <span class="font-medium text-sm">Receitinhas</span>
                            </button>
                            <button class="bg-white p-4 rounded-2xl shadow-sm border border-pink-50 flex flex-col items-center gap-2 hover:border-bestie transition group">
                                <div class="w-12 h-12 rounded-full bg-blue-100 text-blue-500 flex items-center justify-center group-hover:scale-110 transition">
                                    <i class="fa-solid fa-glass-water"></i>
                                </div>
                                <span class="font-medium text-sm">√Ågua</span>
                            </button>
                        </div>
                    </div>
                </div>
            `,
            recipes: `
                <div class="fade-in">
                    <div class="mb-6 flex justify-between items-end">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Receitinhas ü•ó</h2>
                            <p class="text-gray-500 text-sm">Coma bem sem culpa!</p>
                        </div>
                        <button onclick="navigate('chefBestie')" class="bg-gradient-to-r from-bestie to-pink-400 text-white px-4 py-2 rounded-xl text-xs font-bold shadow-lg shadow-pink-200 hover:scale-105 transition flex items-center gap-2 animate-pulse">
                            <i class="fa-solid fa-wand-magic-sparkles"></i> Chef Bestie
                        </button>
                    </div>

                    <!-- Search -->
                    <div class="relative mb-6">
                        <i class="fa-solid fa-search absolute left-4 top-3.5 text-gray-400 text-sm"></i>
                        <input type="text" placeholder="O que vamos cozinhar?" class="w-full bg-white border border-pink-100 rounded-full py-3 pl-10 pr-4 text-sm focus:outline-none focus:border-bestie focus:ring-1 focus:ring-bestie transition placeholder-gray-400 shadow-sm">
                    </div>

                    <!-- Categories / Filters -->
                    <div class="flex gap-2 overflow-x-auto hide-scrollbar mb-6 pb-2 px-1">
                        <button onclick="filterRecipes('all', this)" class="cat-btn active flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-bestie text-white shadow-md shadow-pink-200 transition">Tudo</button>
                        
                        <!-- Refei√ß√µes -->
                        <button onclick="filterRecipes('cafe', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Caf√© da Manh√£</button>
                        <button onclick="filterRecipes('almoco', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Almo√ßo</button>
                        <button onclick="filterRecipes('jantar', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Jantar</button>
                        
                        <!-- Dietas -->
                        <button onclick="filterRecipes('lowcarb', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Baixo Carboidrato</button>
                        <button onclick="filterRecipes('proteina', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Rico em Prote√≠nas</button>
                        <button onclick="filterRecipes('lowcal', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Baixa Caloria</button>
                        <button onclick="filterRecipes('lowfat', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Baixa Gordura</button>
                        <button onclick="filterRecipes('zeroacucar', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Sem A√ß√∫car</button>
                        
                        <!-- Prefer√™ncias -->
                        <button onclick="filterRecipes('vegano', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Vegano</button>
                        <button onclick="filterRecipes('vegetariano', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Vegetariano</button>
                        
                        <!-- Praticidade -->
                        <button onclick="filterRecipes('simples', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Poucos Ingredientes</button>
                        <button onclick="filterRecipes('rapido', this)" class="cat-btn flex-shrink-0 px-4 py-2 rounded-full text-xs font-semibold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">Preparo R√°pido</button>
                    </div>

                    <!-- Recipe Grid -->
                    <div id="recipe-grid" class="grid grid-cols-1 gap-4 pb-20">
                        <!-- Filled by JS -->
                    </div>
                </div>
            `,
            chefBestie: `
                <div class="fade-in pb-20">
                    <div class="mb-6 flex items-center gap-3">
                        <button onclick="navigate('recipes')" class="w-8 h-8 rounded-full bg-pink-50 text-bestie flex items-center justify-center hover:bg-pink-100 transition">
                            <i class="fa-solid fa-arrow-left"></i>
                        </button>
                        <h2 class="text-2xl font-bold text-gray-800">Chef Bestie ‚ú®</h2>
                    </div>

                    <div class="bg-gradient-to-br from-purple-50 to-pink-50 border border-pink-100 rounded-3xl p-6 shadow-sm mb-6">
                        <p class="text-gray-600 text-sm mb-4">Me conte o que voc√™ tem na geladeira e eu crio uma receitinha m√°gica pra voc√™!</p>
                        
                        <div class="relative">
                            <textarea id="ai-ingredients" rows="3" placeholder="Ex: frango, batata doce, br√≥colis..." class="w-full bg-white border border-pink-200 rounded-2xl p-4 text-sm focus:outline-none focus:border-bestie focus:ring-1 focus:ring-bestie transition placeholder-gray-400 resize-none"></textarea>
                            <div class="absolute bottom-3 right-3 text-xs text-gray-400">
                                <i class="fa-solid fa-carrot"></i>
                            </div>
                        </div>

                        <button onclick="generateAIRecipe()" id="generate-btn" class="w-full mt-4 bg-gradient-to-r from-bestie to-pink-400 text-white py-3 rounded-xl font-bold shadow-lg shadow-pink-200 hover:scale-[1.02] transition active:scale-95 flex items-center justify-center gap-2">
                            <span>Criar Receita M√°gica</span>
                            <i class="fa-solid fa-wand-magic-sparkles"></i>
                        </button>
                    </div>

                    <div id="ai-result" class="hidden space-y-4">
                        <div class="flex items-center gap-2 text-sm text-gray-400 uppercase font-bold tracking-wider mb-2">
                            <i class="fa-solid fa-star text-yellow-400"></i> Resultado
                        </div>
                        <!-- Recipe Card Container -->
                        <div id="ai-recipe-card"></div>
                    </div>
                </div>
            `,
            calculator: `
                 <div class="fade-in text-center pt-10">
                    <div class="w-16 h-16 bg-pink-100 text-bestie rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fa-solid fa-calculator text-2xl"></i>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800">Calculadora Bestie</h2>
                    <p class="text-gray-500 mt-2">Em breve: Calcule seu IMC e Macros!</p>
                </div>
            `,
            profile: `
                <div class="fade-in text-center pt-10">
                    <div class="w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 overflow-hidden border-4 border-white shadow-md">
                        <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Bestie" alt="Profile" />
                    </div>
                    <h2 class="text-xl font-bold text-gray-800">Bestie Fit</h2>
                    <p class="text-bestie font-medium">Membro Premium</p>
                </div>
            `
        };

        // --- FUNCTIONS ---

        function init() {
            navigate('recipes'); 
            renderRecipes('all');
        }

        function navigate(viewName) {
            const main = document.getElementById('app-content');
            main.innerHTML = views[viewName];

            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-bestie');
                btn.classList.add('text-gray-400');
                if(viewName === 'home' && btn.innerText.includes('In√≠cio')) btn.classList.add('text-bestie'), btn.classList.remove('text-gray-400');
                // Highlight Recipes icon for both recipes and chefBestie view
                if((viewName === 'recipes' || viewName === 'chefBestie') && btn.innerText.includes('Receitas')) {
                    btn.classList.add('text-bestie');
                    btn.classList.remove('text-gray-400');
                }
                if(viewName === 'calculator' && btn.innerText.includes('Calc')) btn.classList.add('text-bestie'), btn.classList.remove('text-gray-400');
                if(viewName === 'profile' && btn.innerText.includes('Perfil')) btn.classList.add('text-bestie'), btn.classList.remove('text-gray-400');
            });

            if(viewName === 'recipes') {
                renderRecipes('all');
            }
        }

        async function generateAIRecipe() {
            const input = document.getElementById('ai-ingredients');
            const btn = document.getElementById('generate-btn');
            const resultDiv = document.getElementById('ai-result');
            const cardDiv = document.getElementById('ai-recipe-card');

            if (!input.value.trim()) return;

            // Loading State
            btn.disabled = true;
            btn.innerHTML = `<div class="typing-indicator"><span></span><span></span><span></span></div> Criando...`;
            resultDiv.classList.add('hidden');

            const recipeData = await callGemini(input.value);

            if (recipeData) {
                // Assign a temporary random ID
                recipeData.id = 999; 
                recipeData.image = "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&q=80&w=600"; // Placeholder generic healthy food

                // Render Card (similar to renderRecipes but customized)
                cardDiv.innerHTML = `
                    <div class="bg-white rounded-3xl p-5 shadow-lg border border-pink-100 overflow-hidden relative">
                        <div class="absolute top-0 right-0 bg-bestie text-white text-xs font-bold px-3 py-1 rounded-bl-xl">
                            IA ‚ú®
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">${recipeData.title}</h3>
                        <p class="text-sm text-gray-500 italic mb-4">"${recipeData.description}"</p>
                        
                        <div class="flex gap-4 text-xs text-gray-500 mb-4 bg-pink-50 p-3 rounded-xl">
                            <span class="flex items-center gap-1"><i class="fa-solid fa-fire text-bestie"></i> ${recipeData.calories} kcal</span>
                            <span class="flex items-center gap-1"><i class="fa-regular fa-clock text-bestie"></i> ${recipeData.time}</span>
                            <span class="flex items-center gap-1"><i class="fa-solid fa-utensils text-bestie"></i> ${recipeData.difficulty}</span>
                        </div>

                        <div class="mb-4">
                            <h4 class="font-bold text-gray-800 mb-2 text-sm flex items-center gap-2"><i class="fa-solid fa-basket-shopping text-bestie"></i> Ingredientes</h4>
                            <ul class="text-sm text-gray-600 space-y-1 list-disc pl-4">
                                ${recipeData.ingredients.map(i => `<li>${i}</li>`).join('')}
                            </ul>
                        </div>

                        <div>
                            <h4 class="font-bold text-gray-800 mb-2 text-sm flex items-center gap-2"><i class="fa-solid fa-spoon text-bestie"></i> Modo de Preparo</h4>
                            <ol class="text-sm text-gray-600 space-y-2 list-decimal pl-4">
                                ${recipeData.instructions.map(i => `<li>${i}</li>`).join('')}
                            </ol>
                        </div>
                    </div>
                `;
                resultDiv.classList.remove('hidden');
                resultDiv.scrollIntoView({ behavior: 'smooth' });
            } else {
                alert("Ops! Ocorreu um erro ao criar a receita. Tente novamente!");
            }

            // Reset Button
            btn.disabled = false;
            btn.innerHTML = `<span>Criar Outra Receita</span> <i class="fa-solid fa-wand-magic-sparkles"></i>`;
        }

        // ... existing functions ...
        function filterRecipes(tag, btnElement) {
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.classList.remove('bg-bestie', 'text-white', 'shadow-md');
                btn.classList.add('bg-white', 'text-gray-500', 'border', 'hover:text-bestie');
            });
            btnElement.classList.remove('bg-white', 'text-gray-500', 'border', 'hover:text-bestie');
            btnElement.classList.add('bg-bestie', 'text-white', 'shadow-md');

            renderRecipes(tag);
        }

        function renderRecipes(filterTag) {
            const grid = document.getElementById('recipe-grid');
            if(!grid) return;

            grid.innerHTML = '';
            
            // Check if recipe tags array includes the selected filter tag
            const filtered = filterTag === 'all' 
                ? recipes 
                : recipes.filter(r => r.tags && r.tags.includes(filterTag));

            if(filtered.length === 0) {
                grid.innerHTML = `
                    <div class="text-center py-10 flex flex-col items-center">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3 text-gray-300">
                            <i class="fa-solid fa-cookie-bite text-2xl"></i>
                        </div>
                        <p class="text-gray-400 font-medium">Nenhuma receitinha nessa categoria :(</p>
                        <p class="text-gray-300 text-xs mt-1">Tente outro filtro!</p>
                    </div>`;
                return;
            }

            filtered.forEach(recipe => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-2xl p-3 shadow-sm border border-pink-50 flex gap-4 hover:border-pink-200 transition cursor-pointer";
                card.onclick = () => openRecipe(recipe.id);
                
                card.innerHTML = `
                    <div class="w-24 h-24 rounded-xl bg-gray-100 flex-shrink-0 overflow-hidden">
                        <img src="${recipe.image}" class="w-full h-full object-cover" alt="${recipe.title}">
                    </div>
                    <div class="flex-1 flex flex-col justify-center">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-gray-800 leading-tight line-clamp-2">${recipe.title}</h3>
                            <i class="fa-regular fa-bookmark text-gray-300"></i>
                        </div>
                        <div class="flex flex-wrap gap-1 mt-1.5">
                            <span class="text-[10px] text-bestie font-bold bg-pink-50 px-2 py-0.5 rounded">${recipe.calories} kcal</span>
                            <span class="text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded">${recipe.displayCategory}</span>
                        </div>
                        <div class="mt-auto flex items-center gap-3 text-xs text-gray-400">
                            <span class="flex items-center gap-1"><i class="fa-regular fa-clock"></i> ${recipe.time}</span>
                            <span class="flex items-center gap-1"><i class="fa-solid fa-list-ul"></i> ${recipe.ingredients.length} ingr.</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-center pr-1">
                        <button class="w-8 h-8 rounded-full bg-pink-50 text-bestie hover:bg-bestie hover:text-white transition flex items-center justify-center">
                            <i class="fa-solid fa-chevron-right text-xs"></i>
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function openRecipe(id) {
            const recipe = recipes.find(r => r.id === id);
            if(!recipe) return;

            document.getElementById('modal-img').src = recipe.image;
            document.getElementById('modal-tag').innerText = recipe.displayCategory;
            document.getElementById('modal-title').innerText = recipe.title;
            document.getElementById('modal-cal').innerText = recipe.calories;
            document.getElementById('modal-time').innerText = recipe.time;
            document.getElementById('modal-difficulty').innerText = recipe.difficulty || "F√°cil";
            document.getElementById('modal-yield').innerText = recipe.yield || "1 por√ß√£o";
            document.getElementById('modal-desc').innerText = recipe.description || "";

            const ingList = document.getElementById('modal-ingredients');
            ingList.innerHTML = recipe.ingredients.map(ing => `<li class="flex items-start gap-2"><span class="w-1.5 h-1.5 rounded-full bg-bestie mt-1.5 flex-shrink-0"></span>${ing}</li>`).join('');

            const instList = document.getElementById('modal-instructions');
            instList.innerHTML = recipe.instructions.map((step, idx) => `
                <div class="flex gap-3">
                    <div class="w-6 h-6 rounded-full bg-pink-100 text-bestie text-xs font-bold flex items-center justify-center flex-shrink-0">${idx + 1}</div>
                    <p class="leading-snug">${step}</p>
                </div>
            `).join('');

            const modal = document.getElementById('recipe-modal');
            const panel = document.getElementById('modal-panel');
            
            modal.classList.remove('hidden');
            setTimeout(() => {
                panel.classList.remove('translate-y-full');
            }, 10);
        }

        function closeRecipeModal() {
            const modal = document.getElementById('recipe-modal');
            const panel = document.getElementById('modal-panel');
            
            panel.classList.add('translate-y-full');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
