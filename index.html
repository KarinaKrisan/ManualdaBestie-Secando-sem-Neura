<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual da Bestie - Secando sem Neura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        bestie: {
                            light: '#ffe4e6', // rose-100
                            DEFAULT: '#fb7185', // rose-400
                            dark: '#be123c', // rose-700
                            bg: '#fff1f2', // rose-50
                            accent: '#f472b6', // pink-400
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #fff1f2;
            -webkit-tap-highlight-color: transparent;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Custom card styles */
        .menu-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .menu-card:active {
            transform: scale(0.97);
        }
    </style>
</head>
<body class="text-gray-700 pb-20 selection:bg-pink-200">

    <!-- Header -->
    <header class="fixed top-0 w-full z-40 bg-white/90 backdrop-blur-md shadow-sm border-b border-pink-100">
        <div class="max-w-md mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-full bg-gradient-to-br from-bestie to-bestie-accent text-white flex items-center justify-center shadow-md shadow-pink-200">
                    <i class="fa-solid fa-heart text-sm"></i>
                </div>
                <h1 class="font-bold text-lg text-bestie-dark tracking-wide">Manual da Bestie</h1>
            </div>
            <button class="w-8 h-8 rounded-full bg-pink-50 text-bestie flex items-center justify-center hover:bg-pink-100 transition">
                <i class="fa-regular fa-bell"></i>
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="max-w-md mx-auto pt-20 px-4 min-h-screen" id="app-content">
        <!-- Content injected via JS -->
    </main>

    <!-- Recipe Details Modal -->
    <div id="recipe-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity" onclick="closeRecipeModal()"></div>
        <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl h-[90vh] overflow-y-auto transform transition-transform duration-300 translate-y-full md:max-w-md md:mx-auto md:inset-x-0 shadow-2xl" id="modal-panel">
            <div class="relative pb-10">
                <div id="modal-image-container" class="h-64 bg-gray-200 relative">
                    <img id="modal-img" src="" alt="Recipe" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                    <button onclick="closeRecipeModal()" class="absolute top-4 right-4 w-9 h-9 bg-black/20 backdrop-blur text-white rounded-full flex items-center justify-center hover:bg-black/30 transition">
                        <i class="fa-solid fa-xmark"></i>
                    </button>
                </div>
                
                <div class="p-6 -mt-8 bg-white rounded-t-3xl relative z-10">
                    <div class="w-12 h-1.5 bg-gray-200 rounded-full mx-auto mb-6"></div>
                    
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <span id="modal-tag" class="text-[10px] font-bold text-bestie uppercase tracking-wider bg-pink-50 px-2.5 py-1 rounded-lg border border-pink-100">Categoria</span>
                            <h2 id="modal-title" class="text-2xl font-bold text-gray-800 mt-2 leading-tight">Nome da Receita</h2>
                        </div>
                        <div class="flex flex-col items-center bg-green-50 px-3 py-2 rounded-xl border border-green-100">
                            <span class="text-lg font-bold text-green-600 leading-none" id="modal-cal">0</span>
                            <span class="text-[10px] text-green-600 font-medium">kcal</span>
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-2 mb-8">
                        <div class="flex flex-col items-center bg-gray-50 p-2 rounded-xl border border-gray-100">
                            <i class="fa-regular fa-clock text-bestie mb-1"></i>
                            <span class="text-xs font-medium" id="modal-time">0 min</span>
                        </div>
                        <div class="flex flex-col items-center bg-gray-50 p-2 rounded-xl border border-gray-100">
                            <i class="fa-solid fa-fire text-orange-400 mb-1"></i>
                            <span class="text-xs font-medium">F√°cil</span>
                        </div>
                        <div class="flex flex-col items-center bg-gray-50 p-2 rounded-xl border border-gray-100">
                            <i class="fa-solid fa-user-group text-blue-400 mb-1"></i>
                            <span class="text-xs font-medium" id="modal-yield">1 por√ß√£o</span>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2 text-lg">
                            <span class="w-8 h-8 rounded-full bg-pink-100 flex items-center justify-center text-bestie text-sm"><i class="fa-solid fa-basket-shopping"></i></span>
                            Ingredientes
                        </h3>
                        <ul id="modal-ingredients" class="space-y-3 text-sm text-gray-600">
                            <!-- JS Inject -->
                        </ul>
                    </div>

                    <div class="mb-8">
                        <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2 text-lg">
                            <span class="w-8 h-8 rounded-full bg-pink-100 flex items-center justify-center text-bestie text-sm"><i class="fa-solid fa-spoon"></i></span>
                            Modo de Preparo
                        </h3>
                        <div id="modal-instructions" class="space-y-6 text-sm text-gray-600 relative pl-4 border-l-2 border-pink-100 ml-3">
                            <!-- JS Inject -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Modal (General Purpose for Tips/Logica etc) -->
    <div id="info-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" onclick="closeInfoModal()"></div>
        <div class="bg-white rounded-3xl w-full max-w-sm relative z-10 p-6 shadow-2xl animate-bounce-in transform transition-all">
            <button onclick="closeInfoModal()" class="absolute top-4 right-4 text-gray-400 hover:text-bestie">
                <i class="fa-solid fa-xmark text-xl"></i>
            </button>
            <div id="info-content">
                <!-- Content Injected -->
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 w-full z-40 bg-white border-t border-pink-100 pb-safe shadow-[0_-5px_20px_rgba(0,0,0,0.03)]">
        <div class="max-w-md mx-auto px-6 h-16 flex items-center justify-between">
            <button onclick="navigate('home')" class="nav-btn active flex flex-col items-center gap-1 text-bestie group">
                <div class="group-active:scale-90 transition">
                    <i class="fa-solid fa-house text-xl mb-0.5"></i>
                </div>
                <span class="text-[10px] font-medium">In√≠cio</span>
            </button>
            <button onclick="navigate('recipes')" class="nav-btn flex flex-col items-center gap-1 text-gray-400 hover:text-bestie transition group">
                <div class="group-active:scale-90 transition">
                    <i class="fa-solid fa-utensils text-xl mb-0.5"></i>
                </div>
                <span class="text-[10px] font-medium">Receitas</span>
            </button>
            <div class="relative -top-6">
                <button class="w-14 h-14 rounded-full bg-gradient-to-r from-bestie to-bestie-accent text-white flex items-center justify-center shadow-lg shadow-pink-300 hover:scale-105 transition active:scale-95 border-4 border-white">
                    <i class="fa-solid fa-plus text-xl"></i>
                </button>
            </div>
            <button onclick="navigate('calculator')" class="nav-btn flex flex-col items-center gap-1 text-gray-400 hover:text-bestie transition group">
                <div class="group-active:scale-90 transition">
                    <i class="fa-solid fa-calculator text-xl mb-0.5"></i>
                </div>
                <span class="text-[10px] font-medium">Calc</span>
            </button>
            <button onclick="navigate('profile')" class="nav-btn flex flex-col items-center gap-1 text-gray-400 hover:text-bestie transition group">
                <div class="group-active:scale-90 transition">
                    <i class="fa-regular fa-user text-xl mb-0.5"></i>
                </div>
                <span class="text-[10px] font-medium">Perfil</span>
            </button>
        </div>
    </nav>

    <script>
        // --- DATA ---
        const recipes = [
            {
                id: 1,
                title: "Crepioca Fit",
                category: "cafe",
                calories: 180,
                time: "10 min",
                image: "https://images.unsplash.com/photo-1513442542250-854d436a73f2?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 ovo", "2 colheres (sopa) de goma de tapioca", "1 colher (sopa) de requeij√£o light", "Sal a gosto"],
                instructions: ["Bata o ovo com a tapioca e o requeij√£o at√© ficar homog√™neo.", "Tempere com sal e or√©gano a gosto.", "Despeje em uma frigideira antiaderente untada.", "Doure dos dois lados e sirva recheado com frango ou queijo branco."]
            },
            {
                id: 2,
                title: "Salada de Pote",
                category: "almoco",
                calories: 320,
                time: "15 min",
                image: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&q=80&w=600",
                ingredients: ["Mix de folhas (alface, r√∫cula)", "100g de frango desfiado temperado", "Tomate cereja cortado ao meio", "Cenoura ralada", "Molho: iogurte, mostarda e lim√£o"],
                instructions: ["Comece colocando o molho no fundo do pote de vidro.", "Adicione a cenoura e o tomate (itens mais pesados).", "Coloque o frango desfiado.", "Finalize com as folhas por cima para n√£o murchar em contato com o molho.", "Tampe bem e mantenha refrigerado. Agite antes de comer."]
            },
            {
                id: 3,
                title: "Brigadeiro de Whey",
                category: "sos-formiga",
                calories: 120,
                time: "15 min",
                image: "https://images.unsplash.com/photo-1541783245831-57d6fb0926d3?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 scoop de Whey Protein sabor chocolate", "1 colher (ch√°) de cacau 100%", "2 colheres (sopa) de leite em p√≥ desnatado", "√Ågua morna (bem pouca)"],
                instructions: ["Em um bowl pequeno, misture todos os ingredientes secos.", "V√° adicionando √°gua morna bem aos poucos, colher por colher.", "Misture vigorosamente at√© dar o ponto de brigadeiro de colher.", "Leve √† geladeira por 15 minutos para firmar mais."]
            },
            {
                id: 4,
                title: "Pizza de Frigideira Low Carb",
                category: "fim-de-semana",
                calories: 280,
                time: "20 min",
                image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 ovo", "2 colheres de farinha de am√™ndoas (ou aveia)", "1 colher de queijo ralado", "Molho de tomate caseiro", "Recheio: Queijo, tomate, manjeric√£o"],
                instructions: ["Misture o ovo, a farinha e o queijo ralado.", "Despeje na frigideira untada e doure dos dois lados (massa).", "Com o fogo baixo, adicione o molho e o recheio por cima.", "Tampe a frigideira para derreter o queijo.", "Sirva imediatamente."]
            },
             {
                id: 5,
                title: "Mousse de Maracuj√° Fit",
                category: "sos-formiga",
                calories: 140,
                time: "10 min + geladeira",
                image: "https://images.unsplash.com/photo-1543362906-acfc16c67564?auto=format&fit=crop&q=80&w=600",
                ingredients: ["1 iogurte natural desnatado", "1/2 pacote de suco em p√≥ zero (sabor maracuj√°)", "2 colheres de leite em p√≥ desnatado"],
                instructions: ["Misture o iogurte com o leite em p√≥ at√© ficar cremoso.", "Adicione o suco em p√≥ aos poucos e misture bem (ele vai engrossar o creme).", "Coloque em ta√ßas e leve √† geladeira por 30 min.", "Decore com polpa de maracuj√° natural se desejar."]
            }
        ];

        const infoCardsData = {
            'logica': {
                icon: 'fa-chart-pie',
                color: 'text-blue-500',
                bg: 'bg-blue-100',
                title: 'A L√≥gica do Prato',
                content: `
                    <div class="text-center">
                        <div class="w-20 h-20 mx-auto bg-blue-50 rounded-full flex items-center justify-center mb-4 text-3xl">üçΩÔ∏è</div>
                        <h3 class="font-bold text-lg mb-2">Como montar seu prato?</h3>
                        <p class="text-sm text-gray-600 mb-4">Para secar sem neura, siga essa propor√ß√£o no almo√ßo e jantar:</p>
                        <ul class="text-left text-sm space-y-3 bg-gray-50 p-4 rounded-xl">
                            <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-green-400"></span> <strong>50% Salada e Legumes:</strong> Fibras e volume!</li>
                            <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-red-400"></span> <strong>25% Prote√≠na:</strong> Frango, peixe, ovos ou carne magra.</li>
                            <li class="flex items-center gap-2"><span class="w-3 h-3 rounded-full bg-yellow-400"></span> <strong>25% Carboidrato:</strong> Arroz, batata, mandioca ou macarr√£o.</li>
                        </ul>
                    </div>
                `
            },
            'kit': {
                icon: 'fa-box-open',
                color: 'text-purple-500',
                bg: 'bg-purple-100',
                title: 'Kit da Bestie',
                content: `
                    <div class="text-center">
                        <h3 class="font-bold text-lg mb-4">Essenciais para ter em casa</h3>
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="bg-pink-50 p-3 rounded-xl border border-pink-100">
                                <div class="text-xl mb-1">‚öñÔ∏è</div>
                                <strong>Balan√ßa</strong>
                                <p class="text-xs text-gray-500">Pese seus alimentos</p>
                            </div>
                            <div class="bg-pink-50 p-3 rounded-xl border border-pink-100">
                                <div class="text-xl mb-1">üíß</div>
                                <strong>Garrafa</strong>
                                <p class="text-xs text-gray-500">2L por dia no m√≠nimo</p>
                            </div>
                            <div class="bg-pink-50 p-3 rounded-xl border border-pink-100">
                                <div class="text-xl mb-1">ü•°</div>
                                <strong>Potes</strong>
                                <p class="text-xs text-gray-500">Marmitas da semana</p>
                            </div>
                            <div class="bg-pink-50 p-3 rounded-xl border border-pink-100">
                                <div class="text-xl mb-1">üç≥</div>
                                <strong>Frigideira</strong>
                                <p class="text-xs text-gray-500">Antiaderente boa</p>
                            </div>
                        </div>
                    </div>
                `
            },
            'dica': {
                icon: 'fa-lightbulb',
                color: 'text-yellow-500',
                bg: 'bg-yellow-100',
                title: 'Dica de Ouro',
                content: `
                    <div class="text-center">
                         <div class="w-16 h-16 mx-auto bg-yellow-50 rounded-full flex items-center justify-center mb-4 text-yellow-500 text-2xl"><i class="fa-solid fa-star"></i></div>
                        <h3 class="font-bold text-lg mb-2">Const√¢ncia > Perfei√ß√£o</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            N√£o adianta fazer a dieta perfeita por 3 dias e desistir no 4¬∫. O segredo √© fazer o b√°sico bem feito todos os dias.
                            <br><br>
                            Errou em uma refei√ß√£o? <strong>N√£o chute o balde!</strong> Volte ao plano na pr√≥xima. Seu corpo n√£o sabe que √© fim de semana.
                        </p>
                    </div>
                `
            },
            'trocas': {
                icon: 'fa-right-left',
                color: 'text-green-500',
                bg: 'bg-green-100',
                title: 'Trocas da Bestie',
                content: `
                    <h3 class="font-bold text-lg mb-4 text-center">Substitui√ß√µes Inteligentes</h3>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-center justify-between bg-white p-3 rounded-xl border border-gray-100 shadow-sm">
                            <div class="text-center w-1/3"><span class="line-through text-gray-400">Refrigerante</span></div>
                            <i class="fa-solid fa-arrow-right text-bestie text-xs"></i>
                            <div class="text-center w-1/3 font-bold text-green-600">√Ågua com G√°s + Lim√£o</div>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-xl border border-gray-100 shadow-sm">
                            <div class="text-center w-1/3"><span class="line-through text-gray-400">Doce de Leite</span></div>
                            <i class="fa-solid fa-arrow-right text-bestie text-xs"></i>
                            <div class="text-center w-1/3 font-bold text-green-600">Doce de Leite Zero</div>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded-xl border border-gray-100 shadow-sm">
                            <div class="text-center w-1/3"><span class="line-through text-gray-400">√ìleo de Soja</span></div>
                            <i class="fa-solid fa-arrow-right text-bestie text-xs"></i>
                            <div class="text-center w-1/3 font-bold text-green-600">Azeite de Oliva</div>
                        </div>
                    </div>
                `
            }
        };

        const views = {
            home: `
                <div class="fade-in space-y-6">
                    <div class="bg-gradient-to-br from-bestie to-pink-400 rounded-3xl p-6 text-white shadow-lg shadow-pink-200 relative overflow-hidden">
                        <div class="absolute -right-6 -top-6 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
                        <p class="text-pink-100 text-xs font-medium mb-1 uppercase tracking-wider">Painel Di√°rio</p>
                        <h2 class="text-2xl font-bold mb-4">Bom dia, Bestie! ‚ú®</h2>
                        <div class="flex gap-3">
                            <div class="bg-white/20 backdrop-blur-md rounded-2xl p-3 flex-1 border border-white/10">
                                <div class="flex items-center gap-2 mb-1">
                                    <i class="fa-solid fa-glass-water text-pink-200 text-xs"></i>
                                    <span class="text-xs text-pink-100">Hidrata√ß√£o</span>
                                </div>
                                <span class="font-bold text-2xl">1.2<span class="text-sm font-normal text-pink-100">L</span></span>
                            </div>
                            <div class="bg-white/20 backdrop-blur-md rounded-2xl p-3 flex-1 border border-white/10">
                                <div class="flex items-center gap-2 mb-1">
                                    <i class="fa-solid fa-bullseye text-pink-200 text-xs"></i>
                                    <span class="text-xs text-pink-100">Meta</span>
                                </div>
                                <span class="font-bold text-2xl">55<span class="text-sm font-normal text-pink-100">kg</span></span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="font-bold text-lg text-gray-800 mb-4 px-1">Menu da Bestie</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <!-- SOS Formiga -->
                            <button onclick="navigate('recipes', 'sos-formiga')" class="menu-card bg-white p-4 rounded-2xl border border-pink-100 shadow-sm flex flex-col items-center gap-2 hover:border-pink-300">
                                <div class="w-12 h-12 rounded-2xl bg-pink-100 text-pink-500 flex items-center justify-center text-xl mb-1">
                                    <i class="fa-solid fa-candy-cane"></i>
                                </div>
                                <span class="font-bold text-gray-700 text-sm">SOS Formiga</span>
                            </button>

                            <!-- Fim de Semana -->
                            <button onclick="navigate('recipes', 'fim-de-semana')" class="menu-card bg-white p-4 rounded-2xl border border-purple-100 shadow-sm flex flex-col items-center gap-2 hover:border-purple-300">
                                <div class="w-12 h-12 rounded-2xl bg-purple-100 text-purple-500 flex items-center justify-center text-xl mb-1">
                                    <i class="fa-solid fa-champagne-glasses"></i>
                                </div>
                                <span class="font-bold text-gray-700 text-sm">Fim de Semana</span>
                            </button>

                            <!-- A L√≥gica do Prato -->
                            <button onclick="openInfo('logica')" class="menu-card bg-white p-4 rounded-2xl border border-blue-100 shadow-sm flex flex-col items-center gap-2 hover:border-blue-300">
                                <div class="w-12 h-12 rounded-2xl bg-blue-100 text-blue-500 flex items-center justify-center text-xl mb-1">
                                    <i class="fa-solid fa-chart-pie"></i>
                                </div>
                                <span class="font-bold text-gray-700 text-sm">L√≥gica do Prato</span>
                            </button>

                             <!-- Trocas da Bestie -->
                            <button onclick="openInfo('trocas')" class="menu-card bg-white p-4 rounded-2xl border border-green-100 shadow-sm flex flex-col items-center gap-2 hover:border-green-300">
                                <div class="w-12 h-12 rounded-2xl bg-green-100 text-green-500 flex items-center justify-center text-xl mb-1">
                                    <i class="fa-solid fa-right-left"></i>
                                </div>
                                <span class="font-bold text-gray-700 text-sm">Trocas da Bestie</span>
                            </button>

                            <!-- Kit da Bestie -->
                            <button onclick="openInfo('kit')" class="menu-card bg-white p-4 rounded-2xl border border-orange-100 shadow-sm flex flex-col items-center gap-2 hover:border-orange-300">
                                <div class="w-12 h-12 rounded-2xl bg-orange-100 text-orange-500 flex items-center justify-center text-xl mb-1">
                                    <i class="fa-solid fa-box-open"></i>
                                </div>
                                <span class="font-bold text-gray-700 text-sm">Kit da Bestie</span>
                            </button>

                            <!-- Dica de Ouro -->
                            <button onclick="openInfo('dica')" class="menu-card bg-white p-4 rounded-2xl border border-yellow-100 shadow-sm flex flex-col items-center gap-2 hover:border-yellow-300">
                                <div class="w-12 h-12 rounded-2xl bg-yellow-100 text-yellow-500 flex items-center justify-center text-xl mb-1">
                                    <i class="fa-regular fa-lightbulb"></i>
                                </div>
                                <span class="font-bold text-gray-700 text-sm">Dica de Ouro</span>
                            </button>
                        </div>
                    </div>
                </div>
            `,
            recipes: `
                <div class="fade-in">
                    <div class="mb-6 flex justify-between items-end">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-800">Receitinhas ü•ó</h2>
                            <p class="text-gray-500 text-xs">Nutritivas e deliciosas</p>
                        </div>
                    </div>

                    <!-- Search -->
                    <div class="relative mb-6">
                        <i class="fa-solid fa-search absolute left-4 top-3.5 text-gray-400 text-sm"></i>
                        <input type="text" placeholder="Buscar receita..." class="w-full bg-white border border-pink-100 rounded-2xl py-3 pl-10 pr-4 text-sm focus:outline-none focus:border-bestie focus:ring-1 focus:ring-bestie transition placeholder-gray-400 shadow-sm">
                    </div>

                    <!-- Categories -->
                    <div class="flex gap-2 overflow-x-auto hide-scrollbar mb-6 pb-2" id="category-scroll">
                        <button onclick="filterRecipes('all', this)" class="cat-btn active whitespace-nowrap px-4 py-2 rounded-xl text-xs font-bold bg-bestie text-white shadow-md shadow-pink-200 transition">Tudo</button>
                        <button onclick="filterRecipes('sos-formiga', this)" class="cat-btn whitespace-nowrap px-4 py-2 rounded-xl text-xs font-bold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">üç¨ SOS Formiga</button>
                        <button onclick="filterRecipes('fim-de-semana', this)" class="cat-btn whitespace-nowrap px-4 py-2 rounded-xl text-xs font-bold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">üçï Fds</button>
                        <button onclick="filterRecipes('cafe', this)" class="cat-btn whitespace-nowrap px-4 py-2 rounded-xl text-xs font-bold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">‚òï Caf√©</button>
                        <button onclick="filterRecipes('almoco', this)" class="cat-btn whitespace-nowrap px-4 py-2 rounded-xl text-xs font-bold bg-white text-gray-500 border border-pink-100 hover:border-bestie hover:text-bestie transition">ü•ó Almo√ßo</button>
                    </div>

                    <!-- Recipe Grid -->
                    <div id="recipe-grid" class="grid grid-cols-1 gap-4 pb-20">
                        <!-- Filled by JS -->
                    </div>
                </div>
            `,
            calculator: `
                 <div class="fade-in text-center pt-20 px-6">
                    <div class="w-20 h-20 bg-pink-100 text-bestie rounded-3xl rotate-3 flex items-center justify-center mx-auto mb-6 shadow-lg shadow-pink-200">
                        <i class="fa-solid fa-calculator text-3xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 mb-2">Calculadora</h2>
                    <p class="text-gray-500 text-sm leading-relaxed">Em breve voc√™ poder√° calcular seu IMC, Taxa Metab√≥lica Basal e Macros ideais aqui!</p>
                    <button class="mt-8 px-6 py-3 bg-white border border-pink-200 text-bestie font-bold rounded-xl text-sm hover:bg-pink-50 transition">Avise-me quando lan√ßar</button>
                </div>
            `,
            profile: `
                <div class="fade-in text-center pt-10">
                    <div class="relative w-24 h-24 mx-auto mb-4">
                        <div class="w-24 h-24 rounded-full overflow-hidden border-4 border-white shadow-lg">
                             <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Bestie&backgroundColor=ffdfbf" alt="Profile" />
                        </div>
                        <div class="absolute bottom-0 right-0 w-8 h-8 bg-bestie text-white rounded-full flex items-center justify-center border-2 border-white shadow-sm">
                            <i class="fa-solid fa-camera text-xs"></i>
                        </div>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800">Bestie Fit</h2>
                    <p class="text-bestie font-medium text-sm bg-pink-50 inline-block px-3 py-1 rounded-full mt-2">Membro Premium üëë</p>
                    
                    <div class="mt-8 space-y-2 px-4">
                        <button class="w-full bg-white p-4 rounded-xl border border-gray-100 flex items-center justify-between shadow-sm hover:border-pink-200 transition">
                            <span class="text-sm font-medium text-gray-700">Meus Favoritos</span>
                            <i class="fa-solid fa-chevron-right text-xs text-gray-300"></i>
                        </button>
                         <button class="w-full bg-white p-4 rounded-xl border border-gray-100 flex items-center justify-between shadow-sm hover:border-pink-200 transition">
                            <span class="text-sm font-medium text-gray-700">Configura√ß√µes</span>
                            <i class="fa-solid fa-chevron-right text-xs text-gray-300"></i>
                        </button>
                    </div>
                </div>
            `
        };

        // --- FUNCTIONS ---

        function init() {
            // Start at home
            navigate('home'); 
        }

        function navigate(viewName, filter = null) {
            // Update Content
            const main = document.getElementById('app-content');
            main.innerHTML = views[viewName];

            // Update Nav State
            document.querySelectorAll('.nav-btn').forEach(btn => {
                const text = btn.querySelector('span').innerText;
                const iconContainer = btn.firstElementChild; // The div wrapping the icon in the new structure
                const icon = btn.querySelector('i');
                
                // Reset states
                btn.classList.remove('text-bestie');
                btn.classList.add('text-gray-400');
                
                // Active state logic
                let isActive = false;
                if(viewName === 'home' && text === 'In√≠cio') isActive = true;
                if(viewName === 'recipes' && text === 'Receitas') isActive = true;
                if(viewName === 'calculator' && text === 'Calc') isActive = true;
                if(viewName === 'profile' && text === 'Perfil') isActive = true;

                if(isActive) {
                    btn.classList.add('text-bestie');
                    btn.classList.remove('text-gray-400');
                    // Add bounce animation to icon
                    icon.classList.add('animate-bounce');
                    setTimeout(() => icon.classList.remove('animate-bounce'), 1000);
                }
            });

            if(viewName === 'recipes') {
                // Wait for DOM update
                setTimeout(() => {
                    if(filter) {
                        // Find button matching filter and click it essentially
                         const btns = document.querySelectorAll('.cat-btn');
                         let targetBtn = btns[0]; // default all
                         btns.forEach(b => {
                            if(filter === 'sos-formiga' && b.innerText.includes('SOS')) targetBtn = b;
                            if(filter === 'fim-de-semana' && b.innerText.includes('Fds')) targetBtn = b;
                         });
                         filterRecipes(filter, targetBtn);
                    } else {
                        renderRecipes('all');
                    }
                }, 0);
            }
        }

        function openInfo(type) {
            const data = infoCardsData[type];
            if(!data) return;

            const modal = document.getElementById('info-modal');
            const content = document.getElementById('info-content');

            content.innerHTML = `
                <div class="text-center mb-4">
                    <h2 class="${data.color} text-xl font-bold mb-1">${data.title}</h2>
                    <div class="h-1 w-12 bg-gray-100 rounded-full mx-auto"></div>
                </div>
                ${data.content}
            `;
            
            modal.classList.remove('hidden');
        }

        function closeInfoModal() {
            document.getElementById('info-modal').classList.add('hidden');
        }

        function filterRecipes(category, btnElement) {
            // Visual Update Buttons
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.classList.remove('bg-bestie', 'text-white', 'shadow-md');
                btn.classList.add('bg-white', 'text-gray-500', 'border');
            });
            btnElement.classList.remove('bg-white', 'text-gray-500', 'border');
            btnElement.classList.add('bg-bestie', 'text-white', 'shadow-md');

            renderRecipes(category);
        }

        function renderRecipes(category) {
            const grid = document.getElementById('recipe-grid');
            if(!grid) return;

            grid.innerHTML = '';
            
            const filtered = category === 'all' ? recipes : recipes.filter(r => r.category === category);

            if(filtered.length === 0) {
                grid.innerHTML = `
                    <div class="text-center py-10">
                        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3 text-gray-300 text-2xl">
                            <i class="fa-solid fa-cookie-bite"></i>
                        </div>
                        <p class="text-gray-400 font-medium text-sm">Nenhuma receitinha nessa categoria ainda!</p>
                    </div>`;
                return;
            }

            filtered.forEach((recipe, index) => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-2xl p-3 shadow-sm border border-pink-50 flex gap-4 hover:border-pink-200 transition cursor-pointer fade-in";
                card.style.animationDelay = `${index * 0.05}s`;
                card.onclick = () => openRecipe(recipe.id);
                
                card.innerHTML = `
                    <div class="w-24 h-24 rounded-xl bg-gray-100 flex-shrink-0 overflow-hidden relative group">
                        <img src="${recipe.image}" class="w-full h-full object-cover transition duration-500 group-hover:scale-110" alt="${recipe.title}">
                    </div>
                    <div class="flex-1 flex flex-col justify-center py-1">
                        <div class="flex justify-between items-start">
                            <h3 class="font-bold text-gray-800 leading-tight text-sm mb-1">${recipe.title}</h3>
                        </div>
                        <div class="flex gap-2 mb-2">
                             <span class="text-[10px] text-bestie font-bold bg-pink-50 px-2 py-0.5 rounded-md border border-pink-100">${recipe.calories} kcal</span>
                        </div>
                        <div class="mt-auto flex items-center gap-3 text-[10px] text-gray-400 font-medium">
                            <span class="flex items-center gap-1"><i class="fa-regular fa-clock"></i> ${recipe.time}</span>
                            <span class="flex items-center gap-1"><i class="fa-solid fa-list-ul"></i> ${recipe.ingredients.length} ingr.</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-center pr-1">
                        <div class="w-8 h-8 rounded-full bg-gray-50 text-gray-300 group-hover:bg-bestie group-hover:text-white transition flex items-center justify-center">
                            <i class="fa-solid fa-chevron-right text-xs"></i>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function openRecipe(id) {
            const recipe = recipes.find(r => r.id === id);
            if(!recipe) return;

            // Fill Data
            document.getElementById('modal-img').src = recipe.image;
            document.getElementById('modal-tag').innerText = recipe.category === 'sos-formiga' ? 'SOS Formiga' : recipe.category.toUpperCase();
            document.getElementById('modal-title').innerText = recipe.title;
            document.getElementById('modal-cal').innerText = recipe.calories;
            document.getElementById('modal-time').innerText = recipe.time;

            const ingList = document.getElementById('modal-ingredients');
            ingList.innerHTML = recipe.ingredients.map(ing => `
                <li class="flex items-start gap-3 bg-gray-50 p-3 rounded-xl border border-gray-100">
                    <span class="w-1.5 h-1.5 rounded-full bg-bestie mt-2 flex-shrink-0"></span>
                    <span class="leading-snug">${ing}</span>
                </li>`).join('');

            const instList = document.getElementById('modal-instructions');
            instList.innerHTML = recipe.instructions.map((step, idx) => `
                <div class="flex gap-4 relative">
                    <div class="absolute -left-[27px] top-0 w-3 h-3 rounded-full bg-pink-200 border-2 border-white ring-1 ring-pink-100"></div>
                    <p class="leading-relaxed text-gray-600"><span class="font-bold text-bestie mr-1">Passo ${idx + 1}:</span> ${step}</p>
                </div>
            `).join('');

            // Animation
            const modal = document.getElementById('recipe-modal');
            const panel = document.getElementById('modal-panel');
            
            modal.classList.remove('hidden');
            // Small delay to allow display:block to apply before transform
            requestAnimationFrame(() => {
                panel.classList.remove('translate-y-full');
            });
        }

        function closeRecipeModal() {
            const modal = document.getElementById('recipe-modal');
            const panel = document.getElementById('modal-panel');
            
            panel.classList.add('translate-y-full');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }

        // Init App
        window.addEventListener('DOMContentLoaded', init);

    </script>
</body>
</html>
