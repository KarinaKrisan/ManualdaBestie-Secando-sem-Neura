<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual da Bestie üíñ</title>
    <style>
        :root {
            --primary: #ff8fa3;
            --primary-dark: #ff4d6d;
            --bg: #fff0f3;
            --card-bg: #ffffff;
            --text: #590d22;
            --text-light: #800f2f;
            --success: #80b918;
            --overlay: rgba(89, 13, 34, 0.8);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            padding-bottom: 80px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 30px 20px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3);
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* MENU GRID */
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 25px;
        }

        .btn-menu {
            background-color: #fff;
            color: var(--primary-dark);
            border: 2px solid var(--primary);
            padding: 10px 5px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.85rem;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 5px;
        }

        .btn-menu:active {
            transform: scale(0.98);
            background-color: var(--bg);
        }

        /* RESUMO CARD */
        .summary-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-around;
            text-align: center;
        }

        .summary-item strong {
            display: block;
            font-size: 1.2rem;
            color: var(--primary-dark);
        }

        .summary-item span {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* WATER TRACKER */
        .water-tracker {
            background: linear-gradient(to right, #e0f7fa, #b2ebf2);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
            border: 2px solid #4dd0e1;
        }

        .water-bar-container {
            width: 100%;
            height: 20px;
            background-color: rgba(255,255,255,0.6);
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }

        .water-bar {
            height: 100%;
            width: 0%;
            background-color: #00bcd4;
            transition: width 0.3s ease;
        }

        .btn-water {
            background-color: #00bcd4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 188, 212, 0.3);
        }

        .btn-water:active {
            transform: scale(0.98);
        }

        /* MEAL CARDS */
        .meal-card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border-left: 5px solid var(--primary);
            transition: all 0.3s ease;
        }

        .meal-card.done {
            opacity: 0.6;
            background-color: #f0f0f0;
            border-left-color: var(--success);
        }

        .meal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .meal-title {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary-dark);
        }

        .meal-time {
            font-size: 0.8rem;
            background: var(--bg);
            padding: 4px 8px;
            border-radius: 10px;
            font-weight: bold;
        }

        .meal-check {
            width: 25px;
            height: 25px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .meal-card.done .meal-check {
            background-color: var(--success);
            border-color: var(--success);
        }

        .food-list {
            list-style: none;
        }

        .food-list li {
            margin-bottom: 8px;
            font-size: 0.95rem;
            line-height: 1.4;
            border-bottom: 1px dashed #eee;
            padding-bottom: 5px;
        }
        
        .food-list li:last-child {
            border-bottom: none;
        }

        .note {
            font-size: 0.8rem;
            color: #d62828;
            font-style: italic;
            margin-top: 5px;
            display: block;
        }

        .reset-btn {
            display: block;
            margin: 40px auto;
            background: transparent;
            border: 1px solid var(--text-light);
            color: var(--text-light);
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
        }

        /* MODAIS */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 100; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            background-color: var(--overlay);
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background-color: #fff;
            border-radius: 20px;
            width: 100%;
            max-width: 500px;
            max-height: 85vh;
            overflow-y: auto;
            padding: 20px;
            position: relative;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {transform: translateY(20px); opacity: 0;}
            to {transform: translateY(0); opacity: 1;}
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
        }

        .category-title {
            color: var(--primary-dark);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1rem;
            border-bottom: 2px solid var(--bg);
            padding-bottom: 5px;
        }

        /* SHOPPING & SUBS STYLES */
        .shopping-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px dashed #f0f0f0;
        }
        .shopping-item input[type="checkbox"] { width: 20px; height: 20px; accent-color: var(--primary); }
        .shopping-item input:checked + label { text-decoration: line-through; color: #aaa; }
        .subs-list { list-style: none; padding-left: 5px; }
        .subs-list li { margin-bottom: 10px; font-size: 0.9rem; line-height: 1.4; }

        /* ESTILOS DO FORMUL√ÅRIO DE TREINO */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: var(--text-light); }
        .form-group select { width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; font-size: 1rem; background: #fff; }
        .btn-generate {
            width: 100%;
            background: linear-gradient(135deg, #2a9d8f, #264653);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            box-shadow: 0 4px 10px rgba(42, 157, 143, 0.4);
        }
        .btn-generate:active { transform: scale(0.98); }
        
        .workout-result { display: none; margin-top: 20px; background: #f8f9fa; padding: 15px; border-radius: 15px; border-left: 5px solid #2a9d8f; }
        .workout-day { margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px; }
        .workout-day:last-child { border-bottom: none; }
        .exercise-item { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.95rem; }
        .exercise-sets { font-weight: bold; color: #2a9d8f; font-size: 0.85rem; }

    </style>
</head>
<body>

    <header>
        <h1>Manual da Bestie üíñ</h1>
        <div class="subtitle">Seu guia di√°rio de alimenta√ß√£o</div>
    </header>

    <div class="container">
        <div class="summary-card">
            <div class="summary-item">
                <strong>1.600</strong>
                <span>Kcal</span>
            </div>
            <div class="summary-item">
                <strong>Comfort</strong>
                <span>Foco</span>
            </div>
            <div class="summary-item">
                <strong>3.5L</strong>
                <span>Meta √Ågua</span>
            </div>
        </div>

        <div class="action-buttons">
            <button class="btn-menu" onclick="openModal('shoppingModal')">
                üõí<br>Mercado
            </button>
            <button class="btn-menu" onclick="openModal('subsModal')">
                üîÑ<br>Trocas
            </button>
            <button class="btn-menu" onclick="openModal('workoutModal')" style="border-color: #2a9d8f; color: #264653;">
                üí™<br>Treino IA
            </button>
        </div>

        <div class="water-tracker">
            <h3>üíß Hidrata√ß√£o</h3>
            <p>Beba 3 a 3,5 litros hoje!</p>
            <div class="water-bar-container">
                <div class="water-bar" id="waterBar"></div>
            </div>
            <p style="margin-bottom: 10px;"><span id="waterCount">0</span> ml bebidos</p>
            <button class="btn-water" onclick="addWater()">+ 250ml √Ågua</button>
        </div>

        <div id="meals-container"></div>
        <button class="reset-btn" onclick="resetDay()">Come√ßar novo dia ‚Üª</button>
    </div>

    <div id="shoppingModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Lista de Compras üìù</h2>
                <button class="close-modal" onclick="closeModal('shoppingModal')">&times;</button>
            </div>
            <div id="shopping-list-content"></div>
        </div>
    </div>

    <div id="subsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Substitui√ß√µes üîÑ</h2>
                <button class="close-modal" onclick="closeModal('subsModal')">&times;</button>
            </div>
            <div id="subs-content"></div>
        </div>
    </div>

    <div id="workoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Treino da Bestie üí™</h2>
                <button class="close-modal" onclick="closeModal('workoutModal')">&times;</button>
            </div>
            
            <div id="workout-form">
                <p style="margin-bottom:15px; font-size:0.9rem;">Responda para a IA montar seu treino:</p>
                
                <div class="form-group">
                    <label>üìç Onde vai ser?</label>
                    <select id="w-location">
                        <option value="gym">Academia (Smartfit/Outra)</option>
                        <option value="home">Em Casa</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>ü¶µ Qual parte do corpo?</label>
                    <select id="w-focus">
                        <option value="legs">Inferiores (Pernas/Gl√∫teo)</option>
                        <option value="upper">Superiores (Bra√ßo/Costas)</option>
                        <option value="full">Corpo Todo (Full Body)</option>
                        <option value="cardio">S√≥ Cardio + Abdominais</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>‚è±Ô∏è Quanto tempo voc√™ tem?</label>
                    <select id="w-duration">
                        <option value="30">30 min (R√°pido)</option>
                        <option value="45">45 min (Normal)</option>
                        <option value="60">60 min+ (Completo)</option>
                    </select>
                </div>

                <button class="btn-generate" onclick="generateWorkout()">‚ú® Gerar Treino Agora</button>
            </div>

            <div id="workout-result" class="workout-result">
                </div>
        </div>
    </div>

    <script>
        // === DADOS DA DIETA E LISTAS ===
        const dietData = [
            { id: 'cafe', time: '07:00 - 08:00', title: '‚òï Caf√© da Manh√£', items: ['<strong>P√£o Franc√™s:</strong> 1 un (50g) sem miolo', '<strong>Requeij√£o Light:</strong> 1 colher sopa', '<strong>Leite Semi:</strong> 200ml', '<strong>Toddy Light:</strong> 1 colher sopa'] },
            { id: 'lanche-manha', time: '10:30', title: 'üçé Lanche da Manh√£', items: ['1 Fruta: Ma√ß√£, Banana ou Mel√£o'] },
            { id: 'almoco', time: '13:00', title: 'üçΩÔ∏è Almo√ßo', items: ['<strong>Arroz:</strong> 4 colheres', '<strong>Feij√£o:</strong> 1 concha', '<strong>Prote√≠na:</strong> 130g', '<strong>Legumes:</strong> 3 colheres', '<strong>Salada:</strong> √Ä vontade', '<strong>Maionese:</strong> 1 colher sobremesa'] },
            { id: 'lanche-tarde', time: '16:30', title: 'ü•™ Lanche da Tarde', items: ['<strong>P√£o de Forma:</strong> 2 fatias', '<strong>Requeij√£o:</strong> 1 colher', '<strong>Prote√≠na:</strong> Peito Peru, Queijo ou Ovos'] },
            { id: 'jantar', time: '20:00', title: 'üç≤ Jantar', items: ['<strong>Arroz:</strong> 3 colheres OU Pur√™', '<strong>Prote√≠na:</strong> 120g', '<strong>Salada:</strong> √Ä vontade + Azeite'] },
            { id: 'ceia', time: '22:00', title: 'üåô Ceia (Opcional)', items: ['1 Iogurte ou 1 fatia Melancia'] }
        ];

        const shoppingList = {
            "ü•¶ Hortifruti": ["Ma√ß√£, Banana, Mel√£o", "Alface, R√∫cula, Agri√£o", "Tomate, Pepino", "Cenoura, Vagem, Br√≥colis", "Batata"],
            "ü•© A√ßougue": ["Frango/Carne Mo√≠da (2kg)", "Peito de Peru", "Mussarela", "Ovos"],
            "ü•õ Latic√≠nios": ["Leite Semi (3L)", "Requeij√£o Light (2 un)", "Iogurte (7 un)"],
            "üçû Mercearia": ["P√£o Franc√™s", "P√£o de Forma", "Arroz/Feij√£o", "Toddy Light", "Maionese", "Azeite"]
        };

        const subsData = {
            "üçû Carboidratos": ["Macarr√£o (80g)", "Batata Inglesa (140g)", "Mandioquinha (100g)", "Rap10 (1un)", "Tapioca (60g)", "Cuscuz (100g)"],
            "üçó Prote√≠nas": ["Peixe Branco (150g)", "Lombo Su√≠no (120g)", "Ovos (2 un)", "Atum (1 lata)"],
            "ü•¶ Legumes": ["Beterraba", "Couve-flor", "Espinafre", "Berinjela", "Ab√≥bora"]
        };

        // === ESTADO DO APP ===
        let waterML = 0;
        const waterGoal = 3500;
        let checkedMeals = JSON.parse(localStorage.getItem('bestieMeals')) || [];

        function init() {
            renderMeals();
            loadWater();
            updateWaterUI();
            renderShoppingList();
            renderSubs();
        }

        // --- L√ìGICA DE TREINO INTELIGENTE ---
        function generateWorkout() {
            const location = document.getElementById('w-location').value;
            const focus = document.getElementById('w-focus').value;
            const duration = parseInt(document.getElementById('w-duration').value);
            const resultDiv = document.getElementById('workout-result');

            let title = "";
            let exercises = [];
            let cardio = "";

            // L√≥gica Academia (COM EL√çPTICO EM TUDO)
            if (location === 'gym') {
                if (focus === 'legs') {
                    title = "Treino de Inferiores (Pernas & Gl√∫teo)";
                    exercises = [
                        { name: "Agachamento Livre ou Smith", sets: "3x 12-15" },
                        { name: "Leg Press 45¬∫", sets: "3x 12-15" },
                        { name: "Cadeira Extensora", sets: "3x 15" },
                        { name: "Mesa Flexora", sets: "3x 12" },
                        { name: "Eleva√ß√£o P√©lvica", sets: "3x 12-15" },
                        { name: "Panturrilha Sentado", sets: "3x 15" }
                    ];
                    cardio = "15 min El√≠ptico (Ritmo Leve/M√©dio)";
                } else if (focus === 'upper') {
                    title = "Treino de Superiores (Defini√ß√£o)";
                    exercises = [
                        { name: "Puxada Aberta (Costas)", sets: "3x 12" },
                        { name: "Supino Reto (Halter/M√°quina)", sets: "3x 12" },
                        { name: "Remada Baixa", sets: "3x 12" },
                        { name: "Eleva√ß√£o Lateral (Ombros)", sets: "3x 12" },
                        { name: "Tr√≠ceps Corda", sets: "3x 12" },
                        { name: "Rosca Direta (B√≠ceps)", sets: "3x 12" }
                    ];
                    cardio = "20 min El√≠ptico (Moderado)";
                } else if (focus === 'full') {
                    title = "Treino Full Body (Corpo Todo)";
                    exercises = [
                        { name: "Agachamento Goblet (Halter)", sets: "3x 12" },
                        { name: "Supino Vertical M√°quina", sets: "3x 12" },
                        { name: "Leg Press Horizontal", sets: "3x 15" },
                        { name: "Remada M√°quina", sets: "3x 12" },
                        { name: "Desenvolvimento Ombros", sets: "3x 10" },
                        { name: "Prancha Abdominal", sets: "3x 30s" }
                    ];
                    cardio = "15 min El√≠ptico (Recupera√ß√£o)";
                } else { // Cardio
                    title = "Treino Cardio & Abd√¥men";
                    exercises = [
                        { name: "Abdominal Supra (Colchonete)", sets: "3x 20" },
                        { name: "Abdominal Infra (Eleva√ß√£o Pernas)", sets: "3x 15" },
                        { name: "Prancha Isom√©trica", sets: "3x 45s" },
                        { name: "Abdominal Remador", sets: "3x 15" }
                    ];
                    cardio = "30 min El√≠ptico (Intervalado/Forte)";
                }
            } 
            // L√≥gica Casa
            else {
                if (focus === 'legs') {
                    title = "Inferiores em Casa";
                    exercises = [
                        { name: "Agachamento Livre", sets: "3x 20" },
                        { name: "Afundo (Passada)", sets: "3x 12 cada" },
                        { name: "Agachamento Sum√¥", sets: "3x 15" },
                        { name: "Eleva√ß√£o P√©lvica (Ch√£o)", sets: "3x 20" },
                        { name: "Panturrilha no degrau", sets: "3x 20" }
                    ];
                    cardio = "50 Polichinelos";
                } else if (focus === 'upper') {
                    title = "Superiores em Casa";
                    exercises = [
                        { name: "Flex√£o de Bra√ßo (Joelhos)", sets: "3x 8-12" },
                        { name: "Remada Curvada (Garrafa d'√°gua)", sets: "3x 15" },
                        { name: "Eleva√ß√£o Lateral (Garrafas)", sets: "3x 15" },
                        { name: "Tr√≠ceps Banco (Cadeira)", sets: "3x 12" },
                        { name: "Prancha Toca Ombro", sets: "3x 20" }
                    ];
                    cardio = "Corrida estacion√°ria 3 min";
                } else if (focus === 'cardio') {
                    title = "Cardio HIIT em Casa";
                    exercises = [
                        { name: "Polichinelos", sets: "4x 1 min" },
                        { name: "Burpee Adaptado", sets: "4x 10" },
                        { name: "Agachamento com Salto", sets: "4x 15" },
                        { name: "Montanhista (Mountain Climber)", sets: "4x 30s" }
                    ];
                    cardio = "Alongamento final";
                } else {
                    title = "Full Body em Casa";
                    exercises = [
                        { name: "Agachamento", sets: "3x 15" },
                        { name: "Flex√£o de Bra√ßo", sets: "3x 10" },
                        { name: "Afundo", sets: "3x 10 cada" },
                        { name: "Abdominal Remador", sets: "3x 15" }
                    ];
                    cardio = "20 Polichinelos entre s√©ries";
                }
            }

            // Filtro de Tempo (Duration)
            let maxExercises = exercises.length;
            let note = "";
            
            if (duration === 30) {
                // Se 30 min, remove os 2 √∫ltimos exerc√≠cios
                if(exercises.length > 4) maxExercises = exercises.length - 2;
                note = "<em>Como o tempo √© curto, focamos nos principais! Descanse menos (30s).</em>";
                if(location === 'gym') cardio = "10 min El√≠ptico Intenso";
            } else if (duration === 45) {
                // Se 45 min, remove o √∫ltimo
                if(exercises.length > 5) maxExercises = exercises.length - 1;
            }

            // Renderizar HTML
            let html = `<div class="workout-day"><h4>${title}</h4>`;
            html += `<p style="font-size:0.85rem; color:#666; margin-bottom:10px;">${note}</p>`;
            
            for (let i = 0; i < maxExercises; i++) {
                html += renderExercise(exercises[i].name, exercises[i].sets);
            }
            
            html += `<p style="margin-top:15px; font-weight:bold; color:#2a9d8f;">üî• Finaliza√ß√£o: ${cardio}</p>`;
            html += `</div>`;
            
            resultDiv.innerHTML = html;
            resultDiv.style.display = 'block';
        }

        function renderExercise(name, sets) {
            return `
            <div class="exercise-item">
                <span>${name}</span>
                <span class="exercise-sets">${sets}</span>
            </div>`;
        }

        // --- FUN√á√ïES B√ÅSICAS ---
        function renderMeals() {
            const container = document.getElementById('meals-container');
            container.innerHTML = '';
            dietData.forEach(meal => {
                const isDone = checkedMeals.includes(meal.id);
                let listHtml = meal.items.map(item => `<li>${item}</li>`).join('');
                container.innerHTML += `
                    <div class="meal-card ${isDone ? 'done' : ''}" onclick="toggleMeal('${meal.id}')">
                        <div class="meal-header">
                            <div><div class="meal-time">${meal.time}</div><div class="meal-title">${meal.title}</div></div>
                            <div class="meal-check">${isDone ? '‚úî' : ''}</div>
                        </div>
                        <ul class="food-list">${listHtml}</ul>
                    </div>`;
            });
        }

        function toggleMeal(id) {
            checkedMeals = checkedMeals.includes(id) ? checkedMeals.filter(m => m !== id) : [...checkedMeals, id];
            localStorage.setItem('bestieMeals', JSON.stringify(checkedMeals));
            renderMeals();
        }

        function loadWater() { waterML = parseInt(localStorage.getItem('bestieWater') || 0); }
        function addWater() { 
            waterML += 250; 
            if(waterML > 4000) waterML = 4000;
            localStorage.setItem('bestieWater', waterML); 
            updateWaterUI(); 
        }
        function updateWaterUI() {
            const pct = Math.min((waterML / waterGoal) * 100, 100);
            document.getElementById('waterBar').style.width = `${pct}%`;
            document.getElementById('waterCount').innerText = waterML;
        }

        function renderShoppingList() {
            const content = document.getElementById('shopping-list-content');
            let html = '';
            for (const [cat, items] of Object.entries(shoppingList)) {
                html += `<h3 class="category-title">${cat}</h3>`;
                items.forEach((item, i) => {
                    html += `<div class="shopping-item"><input type="checkbox" id="s-${cat}-${i}"><label for="s-${cat}-${i}">${item}</label></div>`;
                });
            }
            content.innerHTML = html;
        }

        function renderSubs() {
            const content = document.getElementById('subs-content');
            let html = '';
            for (const [cat, items] of Object.entries(subsData)) {
                html += `<h3 class="category-title">${cat}</h3><ul class="subs-list">${items.map(i => `<li>${i}</li>`).join('')}</ul>`;
            }
            content.innerHTML = html;
        }

        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        window.onclick = e => { if(e.target.classList.contains('modal')) e.target.style.display = 'none'; }

        function resetDay() {
            if(confirm("Come√ßar novo dia?")) {
                waterML = 0; checkedMeals = [];
                localStorage.setItem('bestieWater', 0); localStorage.setItem('bestieMeals', '[]');
                init();
            }
        }

        init();
    </script>
</body>
</html>
